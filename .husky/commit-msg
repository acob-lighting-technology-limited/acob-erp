# Get the commit message from the file
commit_msg=$(cat "$1")

# Check if the commit message follows the conventional format
if ! echo "$commit_msg" | npx --no -- commitlint --edit "$1" > /dev/null 2>&1; then
  echo ""
  echo "âŒ Invalid commit message format!"
  echo ""
  echo "ğŸ“ Your commit message must follow this format:"
  echo "   type: description"
  echo ""
  echo "ğŸ”§ Available types: feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert"
  echo ""
  echo "âœ… Examples of correct commits:"
  echo "   feat: add user authentication"
  echo "   fix: resolve login button issue"
  echo "   docs: update README with setup guide"
  echo "   style: format code with prettier"
  echo ""
  echo "âŒ Your commit message: '$commit_msg'"
  echo ""
  echo "ğŸš€ Quick fix examples:"
  echo "   git commit -m \"feat: add new feature\""
  echo "   git commit -m \"fix: resolve bug\""
  echo "   git commit -m \"docs: update documentation\""
  echo ""
  echo "ğŸ“– For more help, see: COMMIT_GUIDE.md"
  echo ""
  exit 1
fi
