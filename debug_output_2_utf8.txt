node.exe : open supabase\.temp\profile: The system cannot find the 
file specified.
At line:1 char:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program 
Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~
    + CategoryInfo          : NotSpecified: (open supabase\....file 
    specified.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
Supabase CLI 2.76.8
Using profile: supabase (supabase.co)
Loading project ref from file: supabase\.temp\project-ref
 db Skipped - Image is already present locally 
 mailpit Skipped - Image is already present locally 
 realtime Skipped - Image is already present locally 
 auth Skipped - Image is already present locally 
 pgmeta Skipped - Image is already present locally 
 vector Skipped - Image is already present locally 
 gateway Skipped - Image is already present locally 
 api Skipped - Image is already present locally 
 storage Skipped - Image is already present locally 
 imgProxy Skipped - Image is already present locally 
 edgeRuntime Skipped - Image is already present locally 
 studio Skipped - Image is already present locally 
 analytics Skipped - Image is already present locally 
Starting database...
2026/02/14 07:22:22 PG Send: {"Type":"StartupMessage","ProtocolVersi
on":196608,"Parameters":{"database":"postgres","user":"postgres"}}
2026/02/14 07:22:22 PG Recv: 
{"Type":"AuthenticationSASL","AuthMechanisms":["SCRAM-SHA-256"]}
2026/02/14 07:22:22 PG Send: {"Type":"SASLInitialResponse","AuthMech
anism":"SCRAM-SHA-256","Data":"n,,n=,r=QMoyHZ6AViQ4ss0oXDSYveGx"}
2026/02/14 07:22:22 PG Recv: {"Type":"AuthenticationSASLContinue","D
ata":"r=QMoyHZ6AViQ4ss0oXDSYveGxqOKzpNnXxsyOW3ZcML7q+GDb,s=VYRc6lO2l
JEyX4ZUVxPTDQ==,i=4096"}
2026/02/14 07:22:22 PG Send: {"Type":"SASLResponse","Data":"c=biws,r
=QMoyHZ6AViQ4ss0oXDSYveGxqOKzpNnXxsyOW3ZcML7q+GDb,p=eTD+SGJqA+at6QtZ
PZzWhx7i9ZoU5dUIB7OPwj1vJq4="}
2026/02/14 07:22:22 PG Recv: {"Type":"AuthenticationSASLFinal","Data
":"v=N2j7pvaFwmkQBRlxrsctyb3x5/ns1h5MalikOIbkZmI="}
2026/02/14 07:22:22 PG Recv: {"Type":"AuthenticationOK"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"in_hot_standby","Value":"off"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"integer_datetimes","Value":"on"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"TimeZone","Value":"UTC"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"IntervalStyle","Value":"postgres"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"is_superuser","Value":"off"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"application_name","Value":""}
2026/02/14 07:22:22 PG Recv: {"Type":"ParameterStatus","Name":"defau
lt_transaction_read_only","Value":"off"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"scram_iterations","Value":"4096"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"DateStyle","Value":"ISO, MDY"}
2026/02/14 07:22:22 PG Recv: {"Type":"ParameterStatus","Name":"stand
ard_conforming_strings","Value":"on"}
2026/02/14 07:22:22 PG Recv: {"Type":"ParameterStatus","Name":"sessi
on_authorization","Value":"postgres"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"client_encoding","Value":"UTF8"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"server_version","Value":"17.6"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"ParameterStatus","Name":"server_encoding","Value":"UTF8"}
2026/02/14 07:22:22 PG Recv: 
{"Type":"BackendKeyData","ProcessID":221,"SecretKey":1016686439}
2026/02/14 07:22:22 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Initialising schema...
+ ulimit -n
+ '[' '!' -z '' ']'
+ export ERL_CRASH_DUMP=/tmp/erl_crash.dump
+ ERL_CRASH_DUMP=/tmp/erl_crash.dump
+ '[' false = true ']'
+ [[ -n '' ]]
+ echo 'Running migrations'
+ sudo -E -u nobody /app/bin/migrate
+ '[' true = true ']'
+ echo 'Seeding selfhosted Realtime'
+ sudo -E -u nobody /app/bin/realtime eval 
'Realtime.Release.seeds(Realtime.Repo)'
[os_mon] memory supervisor port (memsup): Erlang has closed
[os_mon] cpu supervisor port (cpu_sup): Erlang has closed
+ echo 'Starting Realtime'
+ ulimit -n
+ exec /app/bin/realtime eval '{:ok, _} = 
Application.ensure_all_started(:realtime)
{:ok, _} = Realtime.Tenants.health_check("realtime-dev")'
[os_mon] memory supervisor port (memsup): Erlang has closed
[os_mon] cpu supervisor port (cpu_sup): Erlang has closed
Seeding globals from roles.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"SET 
lock_timeout = '4s'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE SCHEMA IF NOT EXISTS 
supabase_migrations","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS 
supabase_migrations.schema_migrations (version text NOT NULL 
PRIMARY KEY)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
supabase_migrations.schema_migrations ADD COLUMN IF NOT EXISTS 
statements text[]","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
supabase_migrations.schema_migrations ADD COLUMN IF NOT EXISTS name 
text","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"SET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE SCHEMA"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20200101000000_core_infrastructure.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Core Types\r\n-- 
============================================\r\nDO $$ BEGIN\r\n    
CREATE TYPE user_role AS ENUM ('visitor', 'employee', 'lead', 'admin', 
'super_admin');\r\nEXCEPTION\r\n    WHEN duplicate_object THEN 
null;\r\nEND $$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
1. Profiles Table\r\nCREATE TABLE IF NOT EXISTS public.profiles 
(\r\n  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE 
CASCADE,\r\n  first_name TEXT,\r\n  last_name TEXT,\r\n  
other_names TEXT,\r\n  full_name TEXT,\r\n  department TEXT,\r\n  
department_id UUID,\r\n  company_role TEXT,\r\n  company_email 
TEXT,\r\n  phone_number TEXT,\r\n  additional_phone TEXT,\r\n  
residential_address TEXT,\r\n  current_work_location TEXT,\r\n  
office_location TEXT,\r\n  device_allocated TEXT,\r\n  device_type 
TEXT,\r\n  device_model TEXT,\r\n  employee_number TEXT,\r\n  
is_admin BOOLEAN DEFAULT FALSE,\r\n  is_department_lead BOOLEAN 
DEFAULT FALSE,\r\n  role user_role DEFAULT 'employee',\r\n  
lead_departments TEXT[] DEFAULT '{}',\r\n  job_description 
TEXT,\r\n  job_description_updated_at TIMESTAMPTZ,\r\n  
employment_date DATE,\r\n  date_of_birth DATE,\r\n  bank_name 
TEXT,\r\n  bank_account_number TEXT,\r\n  bank_account_name 
TEXT,\r\n  devices JSONB,\r\n  email_notifications BOOLEAN DEFAULT 
FALSE,\r\n  created_at TIMESTAMPTZ DEFAULT NOW(),\r\n  updated_at 
TIMESTAMPTZ DEFAULT NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
2. Departments Table\r\nCREATE TABLE IF NOT EXISTS 
public.departments (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  name TEXT UNIQUE NOT NULL,\r\n  description 
TEXT,\r\n  is_active BOOLEAN DEFAULT TRUE,\r\n  created_at 
TIMESTAMPTZ DEFAULT NOW(),\r\n  updated_at TIMESTAMPTZ DEFAULT 
NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
3. Office Locations Table\r\nCREATE TABLE IF NOT EXISTS 
public.office_locations (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  name TEXT UNIQUE NOT NULL,\r\n  type TEXT 
NOT NULL,\r\n  department TEXT,\r\n  site TEXT,\r\n  description 
TEXT,\r\n  is_active BOOLEAN DEFAULT TRUE,\r\n  created_at 
TIMESTAMPTZ DEFAULT NOW(),\r\n  updated_at TIMESTAMPTZ DEFAULT 
NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
4. Starlink System (Legacy referencing tables)\r\nCREATE TABLE IF 
NOT EXISTS public.starlink_sites (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  state TEXT NOT NULL,\r\n  site_name TEXT 
NOT NULL,\r\n  email TEXT NOT NULL,\r\n  phone_number TEXT NOT 
NULL,\r\n  serial_number TEXT NOT NULL,\r\n  is_active BOOLEAN NOT 
NULL DEFAULT TRUE,\r\n  notes TEXT,\r\n  
migrated_to_department_payments BOOLEAN DEFAULT FALSE,\r\n  
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\r\n  updated_at 
TIMESTAMPTZ NOT NULL DEFAULT NOW(),\r\n  created_by UUID REFERENCES 
auth.users(id)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS 
public.starlink_payments (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  site_id UUID NOT NULL REFERENCES 
public.starlink_sites(id),\r\n  invoice_number TEXT NOT NULL,\r\n  
billing_period_start DATE NOT NULL,\r\n  billing_period_end DATE 
NOT NULL,\r\n  next_payment_due DATE NOT NULL,\r\n  amount 
NUMERIC,\r\n  currency TEXT,\r\n  payment_status TEXT NOT NULL,\r\n 
 payment_date DATE,\r\n  payment_reference TEXT,\r\n  reminder_sent 
BOOLEAN NOT NULL DEFAULT FALSE,\r\n  reminder_sent_at 
TIMESTAMPTZ,\r\n  requisition_raised BOOLEAN NOT NULL DEFAULT 
FALSE,\r\n  requisition_raised_at TIMESTAMPTZ,\r\n  notes TEXT,\r\n 
 created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\r\n  updated_at 
TIMESTAMPTZ NOT NULL DEFAULT NOW(),\r\n  created_by UUID REFERENCES 
auth.users(id)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS 
public.starlink_documents (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  payment_id UUID NOT NULL REFERENCES 
public.starlink_payments(id) ON DELETE CASCADE,\r\n  document_type 
TEXT NOT NULL,\r\n  file_name TEXT NOT NULL,\r\n  file_path TEXT 
NOT NULL,\r\n  file_size BIGINT,\r\n  mime_type TEXT,\r\n  
description TEXT,\r\n  uploaded_by UUID REFERENCES 
auth.users(id),\r\n  uploaded_at TIMESTAMPTZ NOT NULL DEFAULT 
NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Seed basic departments\r\nINSERT INTO public.departments (name, 
description) VALUES\r\n('IT and Communications', 'Information 
Technology and Communications Department'),\r\n('Accounts', 
'Finance and Accounting Department'),\r\n('Admin \u0026 HR', 
'Administration and Human Resources Department'),\r\n('Operations', 
'Operations Department'),\r\n('Legal, Regulatory and Compliance', 
'Legal and Compliance Department'),\r\n('Business, Growth and 
Innovation', 'Business Development Department'),\r\n('Technical', 
'Technical Services Department')\r\nON CONFLICT (name) DO 
NOTHING","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Enable RLS\r\nALTER TABLE public.profiles ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE public.departments 
ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
public.office_locations ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
public.starlink_sites ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
public.starlink_payments ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
public.starlink_documents ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Grant permissions\r\nGRANT ALL ON ALL TABLES IN SCHEMA public TO 
authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"GRANT ALL ON ALL TABLES IN 
SCHEMA public TO service_role","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"GRANT ALL ON ALL SEQUENCES IN 
SCHEMA public TO authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"GRANT ALL ON ALL SEQUENCES IN 
SCHEMA public TO service_role","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20200101000000"},{"text":"core_infrastructure"},{"binary":"0
0000001000000000000001900000012000000010000010e2d2d203d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d0d0a2d2d20436f72652054797065730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0
a444f20242420424547494e0d0a20202020435245415445205459504520757365725
f726f6c6520415320454e554d20282776697369746f72272c20277374616666272c2
0276c656164272c202761646d696e272c202773757065725f61646d696e27293b0d0
a455843455054494f4e0d0a202020205748454e206475706c69636174655f6f626a6
56374205448454e206e756c6c3b0d0a454e44202424000003ff2d2d20312e2050726
f66696c6573205461626c650d0a435245415445205441424c45204946204e4f54204
55849535453207075626c69632e70726f66696c657320280d0a20206964205555494
4205052494d415259204b4559205245464552454e43455320617574682e757365727
328696429204f4e2044454c45544520434153434144452c0d0a202066697273745f6
e616d6520544558542c0d0a20206c6173745f6e616d6520544558542c0d0a20206f7
46865725f6e616d657320544558542c0d0a202066756c6c5f6e616d6520544558542
c0d0a20206465706172746d656e7420544558542c0d0a20206465706172746d656e7
45f696420555549442c0d0a2020636f6d70616e795f726f6c6520544558542c0d0a2
020636f6d70616e795f656d61696c20544558542c0d0a202070686f6e655f6e756d6
2657220544558542c0d0a20206164646974696f6e616c5f70686f6e6520544558542
c0d0a20207265736964656e7469616c5f6164647265737320544558542c0d0a20206
3757272656e745f776f726b5f6c6f636174696f6e20544558542c0d0a20206f66666
963655f6c6f636174696f6e20544558542c0d0a20206465766963655f616c6c6f636
174656420544558542c0d0a20206465766963655f7479706520544558542c0d0a202
06465766963655f6d6f64656c20544558542c0d0a2020656d706c6f7965655f6e756
d62657220544558542c0d0a202069735f61646d696e20424f4f4c45414e204445464
1554c542046414c53452c0d0a202069735f6465706172746d656e745f6c656164204
24f4f4c45414e2044454641554c542046414c53452c0d0a2020726f6c65207573657
25f726f6c652044454641554c5420277374616666272c0d0a20206c6561645f64657
06172746d656e747320544558545b5d2044454641554c5420277b7d272c0d0a20206
a6f625f6465736372697074696f6e20544558542c0d0a20206a6f625f64657363726
97074696f6e5f757064617465645f61742054494d455354414d50545a2c0d0a20206
56d706c6f796d656e745f6461746520444154452c0d0a2020646174655f6f665f626
972746820444154452c0d0a202062616e6b5f6e616d6520544558542c0d0a2020626
16e6b5f6163636f756e745f6e756d62657220544558542c0d0a202062616e6b5f616
3636f756e745f6e616d6520544558542c0d0a202064657669636573204a534f4e422
c0d0a2020656d61696c5f6e6f74696669636174696f6e7320424f4f4c45414e20444
54641554c542046414c53452c0d0a2020637265617465645f61742054494d4553544
14d50545a2044454641554c54204e4f5728292c0d0a2020757064617465645f61742
054494d455354414d50545a2044454641554c54204e4f5728290d0a29000001242d2
d20322e204465706172746d656e7473205461626c650d0a435245415445205441424
c45204946204e4f5420455849535453207075626c69632e6465706172746d656e747
320280d0a202069642055554944205052494d415259204b45592044454641554c542
067656e5f72616e646f6d5f7575696428292c0d0a20206e616d65205445585420554
e49515545204e4f54204e554c4c2c0d0a20206465736372697074696f6e205445585
42c0d0a202069735f61637469766520424f4f4c45414e2044454641554c542054525
5452c0d0a2020637265617465645f61742054494d455354414d50545a20444546415
54c54204e4f5728292c0d0a2020757064617465645f61742054494d455354414d505
45a2044454641554c54204e4f5728290d0a29000001672d2d20332e204f666669636
5204c6f636174696f6e73205461626c650d0a435245415445205441424c452049462
04e4f5420455849535453207075626c69632e6f66666963655f6c6f636174696f6e7
320280d0a202069642055554944205052494d415259204b45592044454641554c542
067656e5f72616e646f6d5f7575696428292c0d0a20206e616d65205445585420554
e49515545204e4f54204e554c4c2c0d0a2020747970652054455854204e4f54204e5
54c4c2c0d0a20206465706172746d656e7420544558542c0d0a20207369746520544
558542c0d0a20206465736372697074696f6e20544558542c0d0a202069735f61637
469766520424f4f4c45414e2044454641554c5420545255452c0d0a2020637265617
465645f61742054494d455354414d50545a2044454641554c54204e4f5728292c0d0
a2020757064617465645f61742054494d455354414d50545a2044454641554c54204
e4f5728290d0a290000022b2d2d20342e20537461726c696e6b2053797374656d202
84c6567616379207265666572656e63696e67207461626c6573290d0a43524541544
5205441424c45204946204e4f5420455849535453207075626c69632e737461726c6
96e6b5f736974657320280d0a202069642055554944205052494d415259204b45592
044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20207374617
4652054455854204e4f54204e554c4c2c0d0a2020736974655f6e616d65205445585
4204e4f54204e554c4c2c0d0a2020656d61696c2054455854204e4f54204e554c4c2
c0d0a202070686f6e655f6e756d6265722054455854204e4f54204e554c4c2c0d0a2
02073657269616c5f6e756d6265722054455854204e4f54204e554c4c2c0d0a20206
9735f61637469766520424f4f4c45414e204e4f54204e554c4c2044454641554c542
0545255452c0d0a20206e6f74657320544558542c0d0a20206d696772617465645f7
46f5f6465706172746d656e745f7061796d656e747320424f4f4c45414e204445464
1554c542046414c53452c0d0a2020637265617465645f61742054494d455354414d5
0545a204e4f54204e554c4c2044454641554c54204e4f5728292c0d0a20207570646
17465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554
c54204e4f5728292c0d0a2020637265617465645f627920555549442052454645524
54e43455320617574682e7573657273286964290d0a29000002fe435245415445205
441424c45204946204e4f5420455849535453207075626c69632e737461726c696e6
b5f7061796d656e747320280d0a202069642055554944205052494d415259204b455
92044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a202073697
4655f69642055554944204e4f54204e554c4c205245464552454e434553207075626
c69632e737461726c696e6b5f7369746573286964292c0d0a2020696e766f6963655
f6e756d6265722054455854204e4f54204e554c4c2c0d0a202062696c6c696e675f7
06572696f645f73746172742044415445204e4f54204e554c4c2c0d0a202062696c6
c696e675f706572696f645f656e642044415445204e4f54204e554c4c2c0d0a20206
e6578745f7061796d656e745f6475652044415445204e4f54204e554c4c2c0d0a202
0616d6f756e74204e554d455249432c0d0a202063757272656e637920544558542c0
d0a20207061796d656e745f7374617475732054455854204e4f54204e554c4c2c0d0
a20207061796d656e745f6461746520444154452c0d0a20207061796d656e745f726
5666572656e636520544558542c0d0a202072656d696e6465725f73656e7420424f4
f4c45414e204e4f54204e554c4c2044454641554c542046414c53452c0d0a2020726
56d696e6465725f73656e745f61742054494d455354414d50545a2c0d0a202072657
17569736974696f6e5f72616973656420424f4f4c45414e204e4f54204e554c4c204
4454641554c542046414c53452c0d0a20207265717569736974696f6e5f726169736
5645f61742054494d455354414d50545a2c0d0a20206e6f74657320544558542c0d0
a2020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2
044454641554c54204e4f5728292c0d0a2020757064617465645f61742054494d455
354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728292c0d0a202
0637265617465645f62792055554944205245464552454e43455320617574682e757
3657273286964290d0a29000001b8435245415445205441424c45204946204e4f542
0455849535453207075626c69632e737461726c696e6b5f646f63756d656e7473202
80d0a202069642055554944205052494d415259204b45592044454641554c5420676
56e5f72616e646f6d5f7575696428292c0d0a20207061796d656e745f69642055554
944204e4f54204e554c4c205245464552454e434553207075626c69632e737461726
c696e6b5f7061796d656e747328696429204f4e2044454c455445204341534341444
52c0d0a2020646f63756d656e745f747970652054455854204e4f54204e554c4c2c0
d0a202066696c655f6e616d652054455854204e4f54204e554c4c2c0d0a202066696
c655f706174682054455854204e4f54204e554c4c2c0d0a202066696c655f73697a6
520424947494e542c0d0a20206d696d655f7479706520544558542c0d0a202064657
36372697074696f6e20544558542c0d0a202075706c6f616465645f6279205555494
4205245464552454e43455320617574682e7573657273286964292c0d0a202075706
c6f616465645f61742054494d455354414d50545a204e4f54204e554c4c204445464
1554c54204e4f5728290d0a290000022a2d2d2053656564206261736963206465706
172746d656e74730d0a494e5345525420494e544f207075626c69632e64657061727
46d656e747320286e616d652c206465736372697074696f6e292056414c5545530d0
a2827495420616e6420436f6d6d756e69636174696f6e73272c2027496e666f726d6
174696f6e20546563686e6f6c6f677920616e6420436f6d6d756e69636174696f6e7
3204465706172746d656e7427292c0d0a28274163636f756e7473272c202746696e6
16e636520616e64204163636f756e74696e67204465706172746d656e7427292c0d0
a282741646d696e2026204852272c202741646d696e697374726174696f6e20616e6
42048756d616e205265736f7572636573204465706172746d656e7427292c0d0a282
74f7065726174696f6e73272c20274f7065726174696f6e73204465706172746d656
e7427292c0d0a28274c6567616c2c20526567756c61746f727920616e6420436f6d7
06c69616e6365272c20274c6567616c20616e6420436f6d706c69616e63652044657
06172746d656e7427292c0d0a2827427573696e6573732c2047726f77746820616e6
420496e6e6f766174696f6e272c2027427573696e65737320446576656c6f706d656
e74204465706172746d656e7427292c0d0a2827546563686e6963616c272c2027546
563686e6963616c205365727669636573204465706172746d656e7427290d0a4f4e2
0434f4e464c49435420286e616d652920444f204e4f5448494e47000000442d2d204
56e61626c6520524c530d0a414c544552205441424c45207075626c69632e70726f6
6696c657320454e41424c4520524f57204c4556454c2053454355524954590000003
8414c544552205441424c45207075626c69632e6465706172746d656e747320454e4
1424c4520524f57204c4556454c2053454355524954590000003d414c54455220544
1424c45207075626c69632e6f66666963655f6c6f636174696f6e7320454e41424c4
520524f57204c4556454c2053454355524954590000003b414c544552205441424c4
5207075626c69632e737461726c696e6b5f736974657320454e41424c4520524f572
04c4556454c2053454355524954590000003e414c544552205441424c45207075626
c69632e737461726c696e6b5f7061796d656e747320454e41424c4520524f57204c4
556454c2053454355524954590000003f414c544552205441424c45207075626c696
32e737461726c696e6b5f646f63756d656e747320454e41424c4520524f57204c455
6454c2053454355524954590000004f2d2d204772616e74207065726d697373696f6
e730d0a4752414e5420414c4c204f4e20414c4c205441424c455320494e205343484
54d41207075626c696320544f2061757468656e74696361746564000000384752414
e5420414c4c204f4e20414c4c205441424c455320494e20534348454d41207075626
c696320544f20736572766963655f726f6c650000003c4752414e5420414c4c204f4
e20414c4c2053455155454e43455320494e20534348454d41207075626c696320544
f2061757468656e746963617465640000003b4752414e5420414c4c204f4e20414c4
c2053455155454e43455320494e20534348454d41207075626c696320544f2073657
2766963655f726f6c65"}],"ResultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"DO"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 7"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20200101000001_rbac_and_features.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- RBAC System - 
Role-Based Access Control\r\n-- 
============================================\r\n\r\n-- Create enum 
for user roles\r\n-- Role Hierarchy (from highest to lowest):\r\n-- 
1. super_admin - Full system access, can assign all roles including 
admin\r\n-- 2. admin - HR functions, cannot assign roles to leads 
or themselves\r\n-- 3. lead - Department leads with limited 
management access\r\n-- 4. employee - Regular employees\r\n-- 5. 
visitor - Read-only guest access\r\nDO $$ BEGIN\r\n    CREATE TYPE 
user_role AS ENUM ('visitor', 'employee', 'lead', 'admin', 
'super_admin');\r\nEXCEPTION\r\n    WHEN duplicate_object THEN 
null;\r\nEND $$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Update profiles table to include role and department lead 
info\r\nALTER TABLE profiles\r\nADD COLUMN IF NOT EXISTS role 
user_role DEFAULT 'employee',\r\nADD COLUMN IF NOT EXISTS 
is_department_lead BOOLEAN DEFAULT false,\r\nADD COLUMN IF NOT 
EXISTS lead_departments TEXT[] DEFAULT '{}',\r\nADD COLUMN IF NOT 
EXISTS job_description TEXT,\r\nADD COLUMN IF NOT EXISTS 
job_description_updated_at TIMESTAMPTZ","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Device 
Management System\r\n-- 
============================================\r\n\r\n-- Devices 
table\r\nCREATE TABLE IF NOT EXISTS devices (\r\n  id UUID PRIMARY 
KEY DEFAULT gen_random_uuid(),\r\n  device_name TEXT NOT NULL,\r\n  
device_type TEXT NOT NULL,\r\n  device_model TEXT,\r\n  
serial_number TEXT UNIQUE,\r\n  purchase_date DATE,\r\n  notes 
TEXT,\r\n  status TEXT DEFAULT 'available', -- available, assigned, 
maintenance, retired\r\n  created_at TIMESTAMPTZ DEFAULT NOW(),\r\n 
 updated_at TIMESTAMPTZ DEFAULT NOW(),\r\n  created_by UUID 
REFERENCES auth.users(id)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Device assignments table (tracks history)\r\nCREATE TABLE IF NOT 
EXISTS device_assignments (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  device_id UUID REFERENCES devices(id) ON 
DELETE CASCADE,\r\n  assigned_to UUID REFERENCES 
auth.users(id),\r\n  assigned_from UUID REFERENCES auth.users(id), 
-- previous user (null if new assignment)\r\n  assigned_by UUID 
REFERENCES auth.users(id), -- admin who made the assignment\r\n  
assigned_at TIMESTAMPTZ DEFAULT NOW(),\r\n  handed_over_at 
TIMESTAMPTZ, -- when device was returned/transferred\r\n  
assignment_notes TEXT,\r\n  handover_notes TEXT,\r\n  is_current 
BOOLEAN DEFAULT true,\r\n  created_at TIMESTAMPTZ DEFAULT 
NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Task Management 
System\r\n-- ============================================\r\n\r\n-- 
Tasks table\r\nCREATE TABLE IF NOT EXISTS tasks (\r\n  id UUID 
PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  title TEXT NOT 
NULL,\r\n  description TEXT,\r\n  priority TEXT DEFAULT 'medium', 
-- low, medium, high, urgent\r\n  status TEXT DEFAULT 'pending', -- 
pending, in_progress, completed, cancelled\r\n  assigned_to UUID 
REFERENCES auth.users(id),\r\n  assigned_by UUID REFERENCES 
auth.users(id),\r\n  department TEXT,\r\n  due_date DATE,\r\n  
started_at TIMESTAMPTZ,\r\n  completed_at TIMESTAMPTZ,\r\n  
progress INTEGER DEFAULT 0, -- 0-100\r\n  created_at TIMESTAMPTZ 
DEFAULT NOW(),\r\n  updated_at TIMESTAMPTZ DEFAULT 
NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Task comments/updates\r\nCREATE TABLE IF NOT EXISTS task_updates 
(\r\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  task_id 
UUID REFERENCES tasks(id) ON DELETE CASCADE,\r\n  user_id UUID 
REFERENCES auth.users(id),\r\n  update_type TEXT, -- comment, 
status_change, progress_update\r\n  content TEXT,\r\n  old_value 
TEXT,\r\n  new_value TEXT,\r\n  created_at TIMESTAMPTZ DEFAULT 
NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Documentation 
System\r\n-- ============================================\r\n\r\n-- 
User documentation\r\nCREATE TABLE IF NOT EXISTS user_documentation 
(\r\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  user_id 
UUID REFERENCES auth.users(id),\r\n  title TEXT NOT NULL,\r\n  
content TEXT NOT NULL, -- Rich text/markdown content\r\n  category 
TEXT,\r\n  tags TEXT[],\r\n  is_draft BOOLEAN DEFAULT false,\r\n  
created_at TIMESTAMPTZ DEFAULT NOW(),\r\n  updated_at TIMESTAMPTZ 
DEFAULT NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Audit Log 
System\r\n-- ============================================\r\n\r\n-- 
Audit logs for all CRUD operations\r\nCREATE TABLE IF NOT EXISTS 
audit_logs (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  user_id UUID REFERENCES auth.users(id),\r\n 
 action TEXT NOT NULL, -- create, update, delete, assign, etc.\r\n  
entity_type TEXT NOT NULL, -- task, device, profile, etc.\r\n  
entity_id UUID,\r\n  old_values JSONB,\r\n  new_values JSONB,\r\n  
ip_address TEXT,\r\n  user_agent TEXT,\r\n  created_at TIMESTAMPTZ 
DEFAULT NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"DO"}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Indexes for 
Performance\r\n-- 
============================================\r\n\r\nCREATE INDEX IF 
NOT EXISTS idx_devices_status ON 
devices(status)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column \"role\" of relation 
\"profiles\" already exists, skipping","Detail":"","Hint":"","Positi
on":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName
":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintNam
e":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_n
ame_collision","UnknownFields":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column 
\"is_department_lead\" of relation \"profiles\" already exists, skip
ping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"Inter
nalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":
"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line"
:7471,"Routine":"check_for_column_name_collision","UnknownFields":nu
ll}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column \"lead_departments\" 
of relation \"profiles\" already exists, skipping","Detail":"","Hint
":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":""
,"SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","C
onstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_
for_column_name_collision","UnknownFields":null}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column \"job_description\" 
of relation \"profiles\" already exists, skipping","Detail":"","Hint
":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":""
,"SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","C
onstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_
for_column_name_collision","UnknownFields":null}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column 
\"job_description_updated_at\" of relation \"profiles\" already 
exists, skipping","Detail":"","Hint":"","Position":0,"InternalPositi
on":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","
ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecm
ds.c","Line":7471,"Routine":"check_for_column_name_collision","Unkno
wnFields":null}
NOTICE (42701): column "role" of relation "profiles" already 
exists, skipping
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (42701): column "is_department_lead" of relation "profiles" 
already exists, skipping
NOTICE (42701): column "lead_departments" of relation "profiles" 
already exists, skipping
NOTICE (42701): column "job_description" of relation "profiles" 
already exists, skipping
NOTICE (42701): column "job_description_updated_at" of relation 
"profiles" already exists, skipping
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_device_assignments_device_id ON 
device_assignments(device_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_device_assignments_assigned_to ON 
device_assignments(assigned_to)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_device_assignments_is_current ON 
device_assignments(is_current)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_tasks_assigned_to ON tasks(assigned_to)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_tasks_status ON tasks(status)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_tasks_department ON tasks(department)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_task_updates_task_id ON 
task_updates(task_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_user_documentation_user_id ON 
user_documentation(user_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_audit_logs_user_id ON audit_logs(user_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_audit_logs_entity_type ON 
audit_logs(entity_type)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_audit_logs_created_at ON audit_logs(created_at 
DESC)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Row Level 
Security (RLS) Policies\r\n-- 
============================================\r\n\r\n-- Enable 
RLS\r\nALTER TABLE devices ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE device_assignments 
ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE tasks ENABLE ROW 
LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE task_updates ENABLE 
ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE user_documentation 
ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE audit_logs ENABLE 
ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Devices policies\r\nCREATE POLICY \"Users can view all devices\" ON 
devices FOR SELECT USING (true)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can create devices\" ON devices FOR INSERT WITH 
CHECK (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE 
profiles.id = auth.uid()\r\n    AND (profiles.role IN 
('super_admin', 'admin'))\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can update devices\" ON devices FOR UPDATE USING 
(\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE 
profiles.id = auth.uid()\r\n    AND (profiles.role IN 
('super_admin', 'admin'))\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Device assignments policies\r\nCREATE POLICY \"Users can view their 
own device assignments\" ON device_assignments FOR SELECT USING 
(\r\n  assigned_to = auth.uid() OR\r\n  EXISTS (\r\n    SELECT 1 
FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n    AND 
(profiles.role IN ('super_admin', 'admin', 'lead'))\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can create device assignments\" ON 
device_assignments FOR INSERT WITH CHECK (\r\n  EXISTS (\r\n    
SELECT 1 FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n    
AND (profiles.role IN ('super_admin', 'admin'))\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Tasks policies\r\nCREATE POLICY \"Users can view their assigned 
tasks or tasks they created\" ON tasks FOR SELECT USING (\r\n  
assigned_to = auth.uid() OR\r\n  assigned_by = auth.uid() OR\r\n  
EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE profiles.id = 
auth.uid()\r\n    AND (\r\n      profiles.role IN ('super_admin', 
'admin') OR\r\n      (profiles.role = 'lead' AND department = 
ANY(profiles.lead_departments))\r\n    )\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY 
\"Leads/admin/super_admin can create tasks\" ON tasks FOR INSERT 
WITH CHECK (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    
WHERE profiles.id = auth.uid()\r\n    AND profiles.role IN 
('super_admin', 'admin', 'lead')\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Task assignee or 
creator can update\" ON tasks FOR UPDATE USING (\r\n  assigned_to = 
auth.uid() OR\r\n  assigned_by = auth.uid() OR\r\n  EXISTS (\r\n    
SELECT 1 FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n    
AND (\r\n      profiles.role IN ('super_admin', 'admin') OR\r\n     
 (profiles.role = 'lead' AND department = 
ANY(profiles.lead_departments))\r\n    )\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Task updates policies\r\nCREATE POLICY \"Users can view task 
updates for their tasks\" ON task_updates FOR SELECT USING (\r\n  
EXISTS (\r\n    SELECT 1 FROM tasks\r\n    WHERE tasks.id = 
task_updates.task_id\r\n    AND (tasks.assigned_to = auth.uid() OR 
tasks.assigned_by = auth.uid())\r\n  ) OR\r\n  EXISTS (\r\n    
SELECT 1 FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n    
AND profiles.role IN ('super_admin', 'admin', 'lead')\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can create 
task updates\" ON task_updates FOR INSERT WITH CHECK 
(true)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Documentation policies\r\nCREATE POLICY \"Users can view their own 
documentation\" ON user_documentation FOR SELECT USING (\r\n  
user_id = auth.uid() OR\r\n  EXISTS (\r\n    SELECT 1 FROM profiles 
p1, profiles p2\r\n    WHERE p1.id = auth.uid()\r\n    AND p2.id = 
user_documentation.user_id\r\n    AND (\r\n      p1.role IN 
('super_admin', 'admin') OR\r\n      (p1.role = 'lead' AND 
p2.department = ANY(p1.lead_departments))\r\n    )\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can create 
their own documentation\" ON user_documentation FOR INSERT WITH 
CHECK (user_id = auth.uid())","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can update 
their own documentation\" ON user_documentation FOR UPDATE USING 
(user_id = auth.uid())","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can delete 
their own documentation\" ON user_documentation FOR DELETE USING 
(user_id = auth.uid())","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Audit logs policies\r\nCREATE POLICY \"super_admin/admin can view 
all audit logs\" ON audit_logs FOR SELECT USING (\r\n  EXISTS (\r\n 
   SELECT 1 FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n 
   AND profiles.role IN ('super_admin', 'admin')\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Leads can view 
their department audit logs\" ON audit_logs FOR SELECT USING (\r\n  
EXISTS (\r\n    SELECT 1 FROM profiles p\r\n    WHERE p.id = 
auth.uid()\r\n    AND p.role = 'lead'\r\n    AND EXISTS (\r\n      
SELECT 1 FROM profiles p2\r\n      WHERE p2.id = 
audit_logs.user_id\r\n      AND p2.department = 
ANY(p.lead_departments)\r\n    )\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Functions for 
Audit Logging\r\n-- 
============================================\r\n\r\n-- Function to 
log audit entries\r\nCREATE OR REPLACE FUNCTION log_audit(\r\n  
p_action TEXT,\r\n  p_entity_type TEXT,\r\n  p_entity_id UUID,\r\n  
p_old_values JSONB DEFAULT NULL,\r\n  p_new_values JSONB DEFAULT 
NULL\r\n) RETURNS UUID AS $$\r\nDECLARE\r\n  audit_id 
UUID;\r\nBEGIN\r\n  INSERT INTO audit_logs (user_id, action, 
entity_type, entity_id, old_values, new_values)\r\n  VALUES 
(auth.uid(), p_action, p_entity_type, p_entity_id, p_old_values, 
p_new_values)\r\n  RETURNING id INTO audit_id;\r\n\r\n  RETURN 
audit_id;\r\nEND;\r\n$$ LANGUAGE plpgsql SECURITY 
DEFINER","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Triggers for 
Updated_at Timestamps\r\n-- 
============================================\r\n\r\nCREATE OR 
REPLACE FUNCTION update_updated_at_column()\r\nRETURNS TRIGGER AS 
$$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$ LANGUAGE plpgsql","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE TRIGGER 
update_devices_updated_at BEFORE UPDATE ON devices\r\n  FOR EACH 
ROW EXECUTE FUNCTION 
update_updated_at_column()","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE TRIGGER 
update_tasks_updated_at BEFORE UPDATE ON tasks\r\n  FOR EACH ROW 
EXECUTE FUNCTION update_updated_at_column()","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE TRIGGER 
update_user_documentation_updated_at BEFORE UPDATE ON 
user_documentation\r\n  FOR EACH ROW EXECUTE FUNCTION 
update_updated_at_column()","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Initial Data / 
Grants\r\n-- ============================================\r\n\r\n-- 
Grant necessary permissions\r\nGRANT USAGE ON SCHEMA public TO 
authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"GRANT ALL ON ALL TABLES IN 
SCHEMA public TO authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"GRANT ALL ON ALL SEQUENCES IN 
SCHEMA public TO authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20200101000001"},{"text":"rbac_and_features"},{"binary":"000
0000100000000000000190000003200000001000002962d2d203d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d0d0a2d2d20524241432053797374656d202d20526f6c652d42617365642041636
365737320436f6e74726f6c0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d204
3726561746520656e756d20666f72207573657220726f6c65730d0a2d2d20526f6c6
520486965726172636879202866726f6d206869676865737420746f206c6f7765737
4293a0d0a2d2d20312e2073757065725f61646d696e202d2046756c6c20737973746
56d206163636573732c2063616e2061737369676e20616c6c20726f6c657320696e6
36c7564696e672061646d696e0d0a2d2d20322e2061646d696e202d2048522066756
e6374696f6e732c2063616e6e6f742061737369676e20726f6c657320746f206c656
16473206f72207468656d73656c7665730d0a2d2d20332e206c656164202d2044657
06172746d656e74206c656164732077697468206c696d69746564206d616e6167656
d656e74206163636573730d0a2d2d20342e207374616666202d20526567756c61722
0656d706c6f796565730d0a2d2d20352e2076697369746f72202d20526561642d6f6
e6c79206775657374206163636573730d0a444f20242420424547494e0d0a2020202
0435245415445205459504520757365725f726f6c6520415320454e554d202827766
97369746f72272c20277374616666272c20276c656164272c202761646d696e272c2
02773757065725f61646d696e27293b0d0a455843455054494f4e0d0a20202020574
8454e206475706c69636174655f6f626a656374205448454e206e756c6c3b0d0a454
e44202424000001862d2d205570646174652070726f66696c6573207461626c65207
46f20696e636c75646520726f6c6520616e64206465706172746d656e74206c65616
420696e666f0d0a414c544552205441424c452070726f66696c65730d0a414444204
34f4c554d4e204946204e4f542045584953545320726f6c6520757365725f726f6c6
52044454641554c5420277374616666272c0d0a41444420434f4c554d4e204946204
e4f54204558495354532069735f6465706172746d656e745f6c65616420424f4f4c4
5414e2044454641554c542066616c73652c0d0a41444420434f4c554d4e204946204
e4f5420455849535453206c6561645f6465706172746d656e747320544558545b5d2
044454641554c5420277b7d272c0d0a41444420434f4c554d4e204946204e4f54204
55849535453206a6f625f6465736372697074696f6e20544558542c0d0a414444204
34f4c554d4e204946204e4f5420455849535453206a6f625f6465736372697074696
f6e5f757064617465645f61742054494d455354414d50545a000002522d2d203d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d0d0a2d2d20446576696365204d616e6167656d656e74205379737
4656d0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d204465766963657320746
1626c650d0a435245415445205441424c45204946204e4f542045584953545320646
5766963657320280d0a202069642055554944205052494d415259204b45592044454
641554c542067656e5f72616e646f6d5f7575696428292c0d0a20206465766963655
f6e616d652054455854204e4f54204e554c4c2c0d0a20206465766963655f7479706
52054455854204e4f54204e554c4c2c0d0a20206465766963655f6d6f64656c20544
558542c0d0a202073657269616c5f6e756d626572205445585420554e495155452c0
d0a202070757263686173655f6461746520444154452c0d0a20206e6f74657320544
558542c0d0a202073746174757320544558542044454641554c542027617661696c6
1626c65272c202d2d20617661696c61626c652c2061737369676e65642c206d61696
e74656e616e63652c20726574697265640d0a2020637265617465645f61742054494
d455354414d50545a2044454641554c54204e4f5728292c0d0a20207570646174656
45f61742054494d455354414d50545a2044454641554c54204e4f5728292c0d0a202
0637265617465645f62792055554944205245464552454e43455320617574682e757
3657273286964290d0a29000002972d2d204465766963652061737369676e6d656e7
473207461626c652028747261636b7320686973746f7279290d0a435245415445205
441424c45204946204e4f5420455849535453206465766963655f61737369676e6d6
56e747320280d0a202069642055554944205052494d415259204b455920444546415
54c542067656e5f72616e646f6d5f7575696428292c0d0a20206465766963655f696
42055554944205245464552454e434553206465766963657328696429204f4e20444
54c45544520434153434144452c0d0a202061737369676e65645f746f20555549442
05245464552454e43455320617574682e7573657273286964292c0d0a20206173736
9676e65645f66726f6d2055554944205245464552454e43455320617574682e75736
57273286964292c202d2d2070726576696f7573207573657220286e756c6c2069662
06e65772061737369676e6d656e74290d0a202061737369676e65645f62792055554
944205245464552454e43455320617574682e7573657273286964292c202d2d20616
46d696e2077686f206d616465207468652061737369676e6d656e740d0a202061737
369676e65645f61742054494d455354414d50545a2044454641554c54204e4f57282
92c0d0a202068616e6465645f6f7665725f61742054494d455354414d50545a2c202
d2d207768656e20646576696365207761732072657475726e65642f7472616e73666
5727265640d0a202061737369676e6d656e745f6e6f74657320544558542c0d0a202
068616e646f7665725f6e6f74657320544558542c0d0a202069735f63757272656e7
420424f4f4c45414e2044454641554c5420747275652c0d0a2020637265617465645
f61742054494d455354414d50545a2044454641554c54204e4f5728290d0a2900000
2d82d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d205461736b204d616e6167656d656e7
42053797374656d0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d205461736b7
3207461626c650d0a435245415445205441424c45204946204e4f542045584953545
3207461736b7320280d0a202069642055554944205052494d415259204b455920444
54641554c542067656e5f72616e646f6d5f7575696428292c0d0a20207469746c652
054455854204e4f54204e554c4c2c0d0a20206465736372697074696f6e205445585
42c0d0a20207072696f7269747920544558542044454641554c5420276d656469756
d272c202d2d206c6f772c206d656469756d2c20686967682c20757267656e740d0a2
02073746174757320544558542044454641554c54202770656e64696e67272c202d2
d2070656e64696e672c20696e5f70726f67726573732c20636f6d706c657465642c2
063616e63656c6c65640d0a202061737369676e65645f746f2055554944205245464
552454e43455320617574682e7573657273286964292c0d0a202061737369676e656
45f62792055554944205245464552454e43455320617574682e75736572732869642
92c0d0a20206465706172746d656e7420544558542c0d0a20206475655f646174652
0444154452c0d0a2020737461727465645f61742054494d455354414d50545a2c0d0
a2020636f6d706c657465645f61742054494d455354414d50545a2c0d0a202070726
f677265737320494e54454745522044454641554c5420302c202d2d20302d3130300
d0a2020637265617465645f61742054494d455354414d50545a2044454641554c542
04e4f5728292c0d0a2020757064617465645f61742054494d455354414d50545a204
4454641554c54204e4f5728290d0a290000017a2d2d205461736b20636f6d6d656e7
4732f757064617465730d0a435245415445205441424c45204946204e4f542045584
9535453207461736b5f7570646174657320280d0a202069642055554944205052494
d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292
c0d0a20207461736b5f69642055554944205245464552454e434553207461736b732
8696429204f4e2044454c45544520434153434144452c0d0a2020757365725f69642
055554944205245464552454e43455320617574682e7573657273286964292c0d0a2
0207570646174655f7479706520544558542c202d2d20636f6d6d656e742c2073746
17475735f6368616e67652c2070726f67726573735f7570646174650d0a2020636f6
e74656e7420544558542c0d0a20206f6c645f76616c756520544558542c0d0a20206
e65775f76616c756520544558542c0d0a2020637265617465645f61742054494d455
354414d50545a2044454641554c54204e4f5728290d0a29000002092d2d203d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d0d0a2d2d20446f63756d656e746174696f6e2053797374656d0d0a2
d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d205573657220646f63756d656e74617
4696f6e0d0a435245415445205441424c45204946204e4f542045584953545320757
365725f646f63756d656e746174696f6e20280d0a202069642055554944205052494
d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292
c0d0a2020757365725f69642055554944205245464552454e43455320617574682e7
573657273286964292c0d0a20207469746c652054455854204e4f54204e554c4c2c0
d0a2020636f6e74656e742054455854204e4f54204e554c4c2c202d2d20526963682
0746578742f6d61726b646f776e20636f6e74656e740d0a202063617465676f72792
0544558542c0d0a20207461677320544558545b5d2c0d0a202069735f64726166742
0424f4f4c45414e2044454641554c542066616c73652c0d0a2020637265617465645
f61742054494d455354414d50545a2044454641554c54204e4f5728292c0d0a20207
57064617465645f61742054494d455354414d50545a2044454641554c54204e4f572
8290d0a29000002322d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d204175646974204c6
f672053797374656d0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d204175646
974206c6f677320666f7220616c6c2043525544206f7065726174696f6e730d0a435
245415445205441424c45204946204e4f54204558495354532061756469745f6c6f6
77320280d0a202069642055554944205052494d415259204b45592044454641554c5
42067656e5f72616e646f6d5f7575696428292c0d0a2020757365725f69642055554
944205245464552454e43455320617574682e7573657273286964292c0d0a2020616
374696f6e2054455854204e4f54204e554c4c2c202d2d206372656174652c2075706
46174652c2064656c6574652c2061737369676e2c206574632e0d0a2020656e74697
4795f747970652054455854204e4f54204e554c4c2c202d2d207461736b2c2064657
66963652c2070726f66696c652c206574632e0d0a2020656e746974795f696420555
549442c0d0a20206f6c645f76616c756573204a534f4e422c0d0a20206e65775f766
16c756573204a534f4e422c0d0a202069705f6164647265737320544558542c0d0a2
020757365725f6167656e7420544558542c0d0a2020637265617465645f617420544
94d455354414d50545a2044454641554c54204e4f5728290d0a29000000c02d2d203
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d0d0a2d2d20496e646578657320666f7220506572666f726d6
16e63650d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a43524541544520494e44455
8204946204e4f5420455849535453206964785f646576696365735f7374617475732
04f4e206465766963657328737461747573290000005c43524541544520494e44455
8204946204e4f5420455849535453206964785f6465766963655f61737369676e6d6
56e74735f6465766963655f6964204f4e206465766963655f61737369676e6d656e7
473286465766963655f6964290000006043524541544520494e444558204946204e4
f5420455849535453206964785f6465766963655f61737369676e6d656e74735f617
37369676e65645f746f204f4e206465766963655f61737369676e6d656e747328617
37369676e65645f746f290000005e43524541544520494e444558204946204e4f542
0455849535453206964785f6465766963655f61737369676e6d656e74735f69735f6
3757272656e74204f4e206465766963655f61737369676e6d656e74732869735f637
57272656e74290000004643524541544520494e444558204946204e4f54204558495
35453206964785f7461736b735f61737369676e65645f746f204f4e207461736b732
861737369676e65645f746f290000003c43524541544520494e444558204946204e4
f5420455849535453206964785f7461736b735f737461747573204f4e207461736b7
328737461747573290000004443524541544520494e444558204946204e4f5420455
849535453206964785f7461736b735f6465706172746d656e74204f4e207461736b7
3286465706172746d656e74290000004c43524541544520494e444558204946204e4
f5420455849535453206964785f7461736b5f757064617465735f7461736b5f69642
04f4e207461736b5f75706461746573287461736b5f6964290000005843524541544
520494e444558204946204e4f5420455849535453206964785f757365725f646f637
56d656e746174696f6e5f757365725f6964204f4e20757365725f646f63756d656e7
46174696f6e28757365725f6964290000004843524541544520494e4445582049462
04e4f5420455849535453206964785f61756469745f6c6f67735f757365725f69642
04f4e2061756469745f6c6f677328757365725f69642900000050435245415445204
94e444558204946204e4f5420455849535453206964785f61756469745f6c6f67735
f656e746974795f74797065204f4e2061756469745f6c6f677328656e746974795f7
4797065290000005343524541544520494e444558204946204e4f542045584953545
3206964785f61756469745f6c6f67735f637265617465645f6174204f4e206175646
9745f6c6f677328637265617465645f6174204445534329000000c62d2d203d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d0d0a2d2d20526f77204c6576656c2053656375726974792028524c5
32920506f6c69636965730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d20456
e61626c6520524c530d0a414c544552205441424c45206465766963657320454e414
24c4520524f57204c4556454c20534543555249545900000038414c5445522054414
24c45206465766963655f61737369676e6d656e747320454e41424c4520524f57204
c4556454c2053454355524954590000002b414c544552205441424c45207461736b7
320454e41424c4520524f57204c4556454c20534543555249545900000032414c544
552205441424c45207461736b5f7570646174657320454e41424c4520524f57204c4
556454c20534543555249545900000038414c544552205441424c4520757365725f6
46f63756d656e746174696f6e20454e41424c4520524f57204c4556454c205345435
55249545900000030414c544552205441424c452061756469745f6c6f677320454e4
1424c4520524f57204c4556454c205345435552495459000000622d2d20446576696
3657320706f6c69636965730d0a43524541544520504f4c494359202255736572732
063616e207669657720616c6c206465766963657322204f4e2064657669636573204
64f522053454c454354205553494e4720287472756529000000e5435245415445205
04f4c49435920224f6e6c792073757065725f61646d696e2f61646d696e2063616e2
0637265617465206465766963657322204f4e206465766963657320464f5220494e5
3455254205749544820434845434b20280d0a202045584953545320280d0a2020202
053454c45435420312046524f4d2070726f66696c65730d0a2020202057484552452
070726f66696c65732e6964203d20617574682e75696428290d0a20202020414e442
02870726f66696c65732e726f6c6520494e20282773757065725f61646d696e272c2
02761646d696e2729290d0a2020290d0a29000000e043524541544520504f4c49435
920224f6e6c792073757065725f61646d696e2f61646d696e2063616e20757064617
465206465766963657322204f4e206465766963657320464f5220555044415445205
553494e4720280d0a202045584953545320280d0a2020202053454c4543542031204
6524f4d2070726f66696c65730d0a2020202057484552452070726f66696c65732e6
964203d20617574682e75696428290d0a20202020414e44202870726f66696c65732
e726f6c6520494e20282773757065725f61646d696e272c202761646d696e2729290
d0a2020290d0a29000001342d2d204465766963652061737369676e6d656e7473207
06f6c69636965730d0a43524541544520504f4c494359202255736572732063616e2
076696577207468656972206f776e206465766963652061737369676e6d656e74732
2204f4e206465766963655f61737369676e6d656e747320464f522053454c4543542
05553494e4720280d0a202061737369676e65645f746f203d20617574682e7569642
829204f520d0a202045584953545320280d0a2020202053454c45435420312046524
f4d2070726f66696c65730d0a2020202057484552452070726f66696c65732e69642
03d20617574682e75696428290d0a20202020414e44202870726f66696c65732e726
f6c6520494e20282773757065725f61646d696e272c202761646d696e272c20276c6
561642729290d0a2020290d0a29000000fb43524541544520504f4c49435920224f6
e6c792073757065725f61646d696e2f61646d696e2063616e2063726561746520646
5766963652061737369676e6d656e747322204f4e206465766963655f61737369676
e6d656e747320464f5220494e53455254205749544820434845434b20280d0a20204
5584953545320280d0a2020202053454c45435420312046524f4d2070726f66696c6
5730d0a2020202057484552452070726f66696c65732e6964203d20617574682e756
96428290d0a20202020414e44202870726f66696c65732e726f6c6520494e2028277
3757065725f61646d696e272c202761646d696e2729290d0a2020290d0a29000001a
02d2d205461736b7320706f6c69636965730d0a43524541544520504f4c494359202
255736572732063616e20766965772074686569722061737369676e6564207461736
b73206f72207461736b732074686579206372656174656422204f4e207461736b732
0464f522053454c454354205553494e4720280d0a202061737369676e65645f746f2
03d20617574682e7569642829204f520d0a202061737369676e65645f6279203d206
17574682e7569642829204f520d0a202045584953545320280d0a2020202053454c4
5435420312046524f4d2070726f66696c65730d0a2020202057484552452070726f6
6696c65732e6964203d20617574682e75696428290d0a20202020414e4420280d0a2
0202020202070726f66696c65732e726f6c6520494e20282773757065725f61646d6
96e272c202761646d696e2729204f520d0a2020202020202870726f66696c65732e7
26f6c65203d20276c6561642720414e44206465706172746d656e74203d20414e592
870726f66696c65732e6c6561645f6465706172746d656e747329290d0a202020202
90d0a2020290d0a29000000e843524541544520504f4c49435920224c656164732f6
1646d696e2f73757065725f61646d696e2063616e20637265617465207461736b732
2204f4e207461736b7320464f5220494e53455254205749544820434845434b20280
d0a202045584953545320280d0a2020202053454c45435420312046524f4d2070726
f66696c65730d0a2020202057484552452070726f66696c65732e6964203d2061757
4682e75696428290d0a20202020414e442070726f66696c65732e726f6c6520494e2
0282773757065725f61646d696e272c202761646d696e272c20276c65616427290d0
a2020290d0a290000017743524541544520504f4c49435920225461736b206173736
9676e6565206f722063726561746f722063616e2075706461746522204f4e2074617
36b7320464f5220555044415445205553494e4720280d0a202061737369676e65645
f746f203d20617574682e7569642829204f520d0a202061737369676e65645f62792
03d20617574682e7569642829204f520d0a202045584953545320280d0a202020205
3454c45435420312046524f4d2070726f66696c65730d0a202020205748455245207
0726f66696c65732e6964203d20617574682e75696428290d0a20202020414e44202
80d0a20202020202070726f66696c65732e726f6c6520494e20282773757065725f6
1646d696e272c202761646d696e2729204f520d0a2020202020202870726f66696c6
5732e726f6c65203d20276c6561642720414e44206465706172746d656e74203d204
14e592870726f66696c65732e6c6561645f6465706172746d656e747329290d0a202
02020290d0a2020290d0a29000001ab2d2d205461736b207570646174657320706f6
c69636965730d0a43524541544520504f4c494359202255736572732063616e20766
96577207461736b207570646174657320666f72207468656972207461736b7322204
f4e207461736b5f7570646174657320464f522053454c454354205553494e4720280
d0a202045584953545320280d0a2020202053454c45435420312046524f4d2074617
36b730d0a202020205748455245207461736b732e6964203d207461736b5f7570646
17465732e7461736b5f69640d0a20202020414e4420287461736b732e61737369676
e65645f746f203d20617574682e7569642829204f52207461736b732e61737369676
e65645f6279203d20617574682e7569642829290d0a202029204f520d0a202045584
953545320280d0a2020202053454c45435420312046524f4d2070726f66696c65730
d0a2020202057484552452070726f66696c65732e6964203d20617574682e7569642
8290d0a20202020414e442070726f66696c65732e726f6c6520494e2028277375706
5725f61646d696e272c202761646d696e272c20276c65616427290d0a2020290d0a2
90000005a43524541544520504f4c494359202255736572732063616e20637265617
465207461736b207570646174657322204f4e207461736b5f7570646174657320464
f5220494e53455254205749544820434845434b20287472756529000001a62d2d204
46f63756d656e746174696f6e20706f6c69636965730d0a43524541544520504f4c4
94359202255736572732063616e2076696577207468656972206f776e20646f63756
d656e746174696f6e22204f4e20757365725f646f63756d656e746174696f6e20464
f522053454c454354205553494e4720280d0a2020757365725f6964203d206175746
82e7569642829204f520d0a202045584953545320280d0a2020202053454c4543542
0312046524f4d2070726f66696c65732070312c2070726f66696c65732070320d0a2
020202057484552452070312e6964203d20617574682e75696428290d0a202020204
14e442070322e6964203d20757365725f646f63756d656e746174696f6e2e7573657
25f69640d0a20202020414e4420280d0a20202020202070312e726f6c6520494e202
82773757065725f61646d696e272c202761646d696e2729204f520d0a20202020202
02870312e726f6c65203d20276c6561642720414e442070322e6465706172746d656
e74203d20414e592870312e6c6561645f6465706172746d656e747329290d0a20202
020290d0a2020290d0a290000007b43524541544520504f4c4943592022557365727
32063616e20637265617465207468656972206f776e20646f63756d656e746174696
f6e22204f4e20757365725f646f63756d656e746174696f6e20464f5220494e53455
254205749544820434845434b2028757365725f6964203d20617574682e756964282
9290000007643524541544520504f4c494359202255736572732063616e207570646
17465207468656972206f776e20646f63756d656e746174696f6e22204f4e2075736
5725f646f63756d656e746174696f6e20464f5220555044415445205553494e47202
8757365725f6964203d20617574682e7569642829290000007643524541544520504
f4c494359202255736572732063616e2064656c657465207468656972206f776e206
46f63756d656e746174696f6e22204f4e20757365725f646f63756d656e746174696
f6e20464f522044454c455445205553494e472028757365725f6964203d206175746
82e756964282929000000f92d2d204175646974206c6f677320706f6c69636965730
d0a43524541544520504f4c494359202273757065725f61646d696e2f61646d696e2
063616e207669657720616c6c206175646974206c6f677322204f4e2061756469745
f6c6f677320464f522053454c454354205553494e4720280d0a20204558495354532
0280d0a2020202053454c45435420312046524f4d2070726f66696c65730d0a20202
02057484552452070726f66696c65732e6964203d20617574682e75696428290d0a2
0202020414e442070726f66696c65732e726f6c6520494e20282773757065725f616
46d696e272c202761646d696e27290d0a2020290d0a2900000158435245415445205
04f4c49435920224c656164732063616e20766965772074686569722064657061727
46d656e74206175646974206c6f677322204f4e2061756469745f6c6f677320464f5
22053454c454354205553494e4720280d0a202045584953545320280d0a202020205
3454c45435420312046524f4d2070726f66696c657320700d0a20202020574845524
520702e6964203d20617574682e75696428290d0a20202020414e4420702e726f6c6
5203d20276c656164270d0a20202020414e442045584953545320280d0a202020202
02053454c45435420312046524f4d2070726f66696c65732070320d0a20202020202
057484552452070322e6964203d2061756469745f6c6f67732e757365725f69640d0
a202020202020414e442070322e6465706172746d656e74203d20414e5928702e6c6
561645f6465706172746d656e7473290d0a20202020290d0a2020290d0a290000029
e2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d2046756e6374696f6e7320666f7220417
5646974204c6f6767696e670d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d204
6756e6374696f6e20746f206c6f6720617564697420656e74726965730d0a4352454
15445204f52205245504c4143452046554e4354494f4e206c6f675f6175646974280
d0a2020705f616374696f6e20544558542c0d0a2020705f656e746974795f7479706
520544558542c0d0a2020705f656e746974795f696420555549442c0d0a2020705f6
f6c645f76616c756573204a534f4e422044454641554c54204e554c4c2c0d0a20207
05f6e65775f76616c756573204a534f4e422044454641554c54204e554c4c0d0a292
052455455524e5320555549442041532024240d0a4445434c4152450d0a202061756
469745f696420555549443b0d0a424547494e0d0a2020494e5345525420494e544f2
061756469745f6c6f67732028757365725f69642c20616374696f6e2c20656e74697
4795f747970652c20656e746974795f69642c206f6c645f76616c7565732c206e657
75f76616c756573290d0a202056414c5545532028617574682e75696428292c20705
f616374696f6e2c20705f656e746974795f747970652c20705f656e746974795f696
42c20705f6f6c645f76616c7565732c20705f6e65775f76616c756573290d0a20205
2455455524e494e4720696420494e544f2061756469745f69643b0d0a0d0a2020524
55455524e2061756469745f69643b0d0a454e443b0d0a2424204c414e47554147452
0706c706773716c20534543555249545920444546494e4552000001232d2d203d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d0d0a2d2d20547269676765727320666f7220557064617465645f6
1742054696d657374616d70730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a43524
5415445204f52205245504c4143452046554e4354494f4e207570646174655f75706
4617465645f61745f636f6c756d6e28290d0a52455455524e5320545249474745522
041532024240d0a424547494e0d0a20204e45572e757064617465645f6174203d204
e4f5728293b0d0a202052455455524e204e45573b0d0a454e443b0d0a2424204c414
e475541474520706c706773716c0000007d435245415445205452494747455220757
0646174655f646576696365735f757064617465645f6174204245464f52452055504
4415445204f4e20646576696365730d0a2020464f52204541434820524f572045584
5435554452046554e4354494f4e207570646174655f757064617465645f61745f636
f6c756d6e2829000000794352454154452054524947474552207570646174655f746
1736b735f757064617465645f6174204245464f524520555044415445204f4e20746
1736b730d0a2020464f52204541434820524f5720455845435554452046554e43544
94f4e207570646174655f757064617465645f61745f636f6c756d6e2829000000934
352454154452054524947474552207570646174655f757365725f646f63756d656e7
46174696f6e5f757064617465645f6174204245464f524520555044415445204f4e2
0757365725f646f63756d656e746174696f6e0d0a2020464f52204541434820524f5
720455845435554452046554e4354494f4e207570646174655f757064617465645f6
1745f636f6c756d6e2829000000cb2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20496
e697469616c2044617461202f204772616e74730d0a2d2d203d3d3d3d3d3d3d3d3d3
d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3
d0d0a0d0a2d2d204772616e74206e6563657373617279207065726d697373696f6e7
30d0a4752414e54205553414745204f4e20534348454d41207075626c696320544f2
061757468656e74696361746564000000394752414e5420414c4c204f4e20414c4c2
05441424c455320494e20534348454d41207075626c696320544f2061757468656e7
46963617465640000003c4752414e5420414c4c204f4e20414c4c2053455155454e4
3455320494e20534348454d41207075626c696320544f2061757468656e746963617
46564"}],"ResultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20200101000002_create_assets_tables.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Assets 
Management System\r\n-- 
============================================\r\n\r\n-- Assets 
table\r\nCREATE TABLE IF NOT EXISTS public.assets (\r\n  id UUID 
PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  asset_name TEXT,\r\n  
asset_type TEXT NOT NULL, -- furniture, equipment, vehicle, 
other\r\n  asset_model TEXT,\r\n  serial_number TEXT,\r\n  
unique_code TEXT NOT NULL,\r\n  acquisition_year INTEGER,\r\n  
notes TEXT,\r\n  status TEXT DEFAULT 'available', -- available, 
assigned, maintenance, retired\r\n  assignment_type TEXT,\r\n  
department TEXT,\r\n  office_location TEXT,\r\n  created_at 
TIMESTAMPTZ DEFAULT NOW(),\r\n  updated_at TIMESTAMPTZ DEFAULT 
NOW(),\r\n  created_by UUID REFERENCES 
auth.users(id)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Asset assignments table (tracks history)\r\nCREATE TABLE IF NOT 
EXISTS public.asset_assignments (\r\n  id UUID PRIMARY KEY DEFAULT 
gen_random_uuid(),\r\n  asset_id UUID REFERENCES public.assets(id) 
ON DELETE CASCADE,\r\n  assigned_to UUID REFERENCES 
auth.users(id),\r\n  assigned_from UUID REFERENCES auth.users(id), 
-- previous user (null if new assignment)\r\n  assigned_by UUID 
REFERENCES auth.users(id), -- admin who made the assignment\r\n  
assigned_at TIMESTAMPTZ DEFAULT NOW(),\r\n  handed_over_at 
TIMESTAMPTZ, -- when asset was returned/transferred\r\n  
assignment_notes TEXT,\r\n  handover_notes TEXT,\r\n  is_current 
BOOLEAN DEFAULT true,\r\n  department TEXT,\r\n  assignment_type 
TEXT DEFAULT 'individual',\r\n  office_location TEXT,\r\n  
created_at TIMESTAMPTZ DEFAULT NOW()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Unique constraint: only one current assignment per asset\r\nCREATE 
UNIQUE INDEX IF NOT EXISTS unique_current_asset_assignment \r\nON 
asset_assignments(asset_id) \r\nWHERE is_current = 
true","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Indexes for 
Performance\r\n-- 
============================================\r\n\r\nCREATE INDEX IF 
NOT EXISTS idx_assets_status ON 
assets(status)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_assets_type ON assets(asset_type)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_asset_assignments_asset_id ON 
asset_assignments(asset_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_asset_assignments_assigned_to ON 
asset_assignments(assigned_to)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_asset_assignments_is_current ON 
asset_assignments(is_current)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Row Level 
Security (RLS) Policies\r\n-- 
============================================\r\n\r\n-- Enable 
RLS\r\nALTER TABLE assets ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE asset_assignments 
ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Assets policies\r\nCREATE POLICY \"Users can view all assets\" ON 
assets FOR SELECT USING (true)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can create assets\" ON assets FOR INSERT WITH 
CHECK (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE 
profiles.id = auth.uid()\r\n    AND (profiles.role IN 
('super_admin', 'admin'))\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can update assets\" ON assets FOR UPDATE USING 
(\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE 
profiles.id = auth.uid()\r\n    AND (profiles.role IN 
('super_admin', 'admin'))\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can delete assets\" ON assets FOR DELETE USING 
(\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE 
profiles.id = auth.uid()\r\n    AND (profiles.role IN 
('super_admin', 'admin'))\r\n  )\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Asset assignments policies\r\nCREATE POLICY \"Users can view their 
own asset assignments\" ON asset_assignments FOR SELECT USING (\r\n 
 assigned_to = auth.uid() OR\r\n  EXISTS (\r\n    SELECT 1 FROM 
profiles\r\n    WHERE profiles.id = auth.uid()\r\n    AND 
(profiles.role IN ('super_admin', 'admin', 'lead'))\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can create asset assignments\" ON 
asset_assignments FOR INSERT WITH CHECK (\r\n  EXISTS (\r\n    
SELECT 1 FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n    
AND (profiles.role IN ('super_admin', 'admin'))\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only 
super_admin/admin can update asset assignments\" ON 
asset_assignments FOR UPDATE USING (\r\n  EXISTS (\r\n    SELECT 1 
FROM profiles\r\n    WHERE profiles.id = auth.uid()\r\n    AND 
(profiles.role IN ('super_admin', 'admin'))\r\n  
)\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Triggers for 
Updated At\r\n-- 
============================================\r\n\r\nCREATE TRIGGER 
update_assets_updated_at BEFORE UPDATE ON assets\r\n  FOR EACH ROW 
EXECUTE FUNCTION update_updated_at_column()","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
============================================\r\n-- Grant 
Permissions\r\n-- 
============================================\r\n\r\nGRANT ALL ON 
assets TO authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"GRANT ALL ON asset_assignments 
TO authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20200101000002"},{"text":"create_assets_tables"},{"binary":"
0000000100000000000000190000001400000001000002d62d2d203d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d0d0a2d2d20417373657473204d616e6167656d656e742053797374656d0d0a
2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d20417373657473207461626c650d0a
435245415445205441424c45204946204e4f5420455849535453207075626c69632e
61737365747320280d0a202069642055554944205052494d415259204b4559204445
4641554c542067656e5f72616e646f6d5f7575696428292c0d0a202061737365745f
6e616d6520544558542c0d0a202061737365745f747970652054455854204e4f5420
4e554c4c2c202d2d206675726e69747572652c2065717569706d656e742c20766568
69636c652c206f746865720d0a202061737365745f6d6f64656c20544558542c0d0a
202073657269616c5f6e756d62657220544558542c0d0a2020756e697175655f636f
64652054455854204e4f54204e554c4c2c0d0a20206163717569736974696f6e5f79
65617220494e54454745522c0d0a20206e6f74657320544558542c0d0a2020737461
74757320544558542044454641554c542027617661696c61626c65272c202d2d2061
7661696c61626c652c2061737369676e65642c206d61696e74656e616e63652c2072
6574697265640d0a202061737369676e6d656e745f7479706520544558542c0d0a20
206465706172746d656e7420544558542c0d0a20206f66666963655f6c6f63617469
6f6e20544558542c0d0a2020637265617465645f61742054494d455354414d50545a
2044454641554c54204e4f5728292c0d0a2020757064617465645f61742054494d45
5354414d50545a2044454641554c54204e4f5728292c0d0a2020637265617465645f
62792055554944205245464552454e43455320617574682e7573657273286964290d
0a29000002fb2d2d2041737365742061737369676e6d656e7473207461626c652028
747261636b7320686973746f7279290d0a435245415445205441424c45204946204e
4f5420455849535453207075626c69632e61737365745f61737369676e6d656e7473
20280d0a202069642055554944205052494d415259204b45592044454641554c5420
67656e5f72616e646f6d5f7575696428292c0d0a202061737365745f696420555549
44205245464552454e434553207075626c69632e61737365747328696429204f4e20
44454c45544520434153434144452c0d0a202061737369676e65645f746f20555549
44205245464552454e43455320617574682e7573657273286964292c0d0a20206173
7369676e65645f66726f6d2055554944205245464552454e43455320617574682e75
73657273286964292c202d2d2070726576696f7573207573657220286e756c6c2069
66206e65772061737369676e6d656e74290d0a202061737369676e65645f62792055
554944205245464552454e43455320617574682e7573657273286964292c202d2d20
61646d696e2077686f206d616465207468652061737369676e6d656e740d0a202061
737369676e65645f61742054494d455354414d50545a2044454641554c54204e4f57
28292c0d0a202068616e6465645f6f7665725f61742054494d455354414d50545a2c
202d2d207768656e206173736574207761732072657475726e65642f7472616e7366
65727265640d0a202061737369676e6d656e745f6e6f74657320544558542c0d0a20
2068616e646f7665725f6e6f74657320544558542c0d0a202069735f63757272656e
7420424f4f4c45414e2044454641554c5420747275652c0d0a20206465706172746d
656e7420544558542c0d0a202061737369676e6d656e745f74797065205445585420
44454641554c542027696e646976696475616c272c0d0a20206f66666963655f6c6f
636174696f6e20544558542c0d0a2020637265617465645f61742054494d45535441
4d50545a2044454641554c54204e4f5728290d0a29000000b92d2d20556e69717565
20636f6e73747261696e743a206f6e6c79206f6e652063757272656e742061737369
676e6d656e74207065722061737365740d0a43524541544520554e4951554520494e
444558204946204e4f542045584953545320756e697175655f63757272656e745f61
737365745f61737369676e6d656e74200d0a4f4e2061737365745f61737369676e6d
656e74732861737365745f696429200d0a57484552452069735f63757272656e7420
3d2074727565000000be2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20496e64657865
7320666f7220506572666f726d616e63650d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a
0d0a43524541544520494e444558204946204e4f5420455849535453206964785f61
73736574735f737461747573204f4e20617373657473287374617475732900000040
43524541544520494e444558204946204e4f5420455849535453206964785f617373
6574735f74797065204f4e206173736574732861737365745f747970652900000058
43524541544520494e444558204946204e4f5420455849535453206964785f617373
65745f61737369676e6d656e74735f61737365745f6964204f4e2061737365745f61
737369676e6d656e74732861737365745f6964290000005e43524541544520494e44
4558204946204e4f5420455849535453206964785f61737365745f61737369676e6d
656e74735f61737369676e65645f746f204f4e2061737365745f61737369676e6d65
6e74732861737369676e65645f746f290000005c43524541544520494e4445582049
46204e4f5420455849535453206964785f61737365745f61737369676e6d656e7473
5f69735f63757272656e74204f4e2061737365745f61737369676e6d656e74732869
735f63757272656e7429000000c52d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20526f
77204c6576656c2053656375726974792028524c532920506f6c69636965730d0a2d
2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d20456e61626c6520524c530d0a414c54
4552205441424c452061737365747320454e41424c4520524f57204c4556454c2053
4543555249545900000037414c544552205441424c452061737365745f6173736967
6e6d656e747320454e41424c4520524f57204c4556454c2053454355524954590000
005f2d2d2041737365747320706f6c69636965730d0a43524541544520504f4c4943
59202255736572732063616e207669657720616c6c2061737365747322204f4e2061
737365747320464f522053454c454354205553494e4720287472756529000000e343
524541544520504f4c49435920224f6e6c792073757065725f61646d696e2f61646d
696e2063616e206372656174652061737365747322204f4e2061737365747320464f
5220494e53455254205749544820434845434b20280d0a202045584953545320280d
0a2020202053454c45435420312046524f4d2070726f66696c65730d0a2020202057
484552452070726f66696c65732e6964203d20617574682e75696428290d0a202020
20414e44202870726f66696c65732e726f6c6520494e20282773757065725f61646d
696e272c202761646d696e2729290d0a2020290d0a29000000de4352454154452050
4f4c49435920224f6e6c792073757065725f61646d696e2f61646d696e2063616e20
7570646174652061737365747322204f4e2061737365747320464f52205550444154
45205553494e4720280d0a202045584953545320280d0a2020202053454c45435420
312046524f4d2070726f66696c65730d0a2020202057484552452070726f66696c65
732e6964203d20617574682e75696428290d0a20202020414e44202870726f66696c
65732e726f6c6520494e20282773757065725f61646d696e272c202761646d696e27
29290d0a2020290d0a29000000de43524541544520504f4c49435920224f6e6c7920
73757065725f61646d696e2f61646d696e2063616e2064656c657465206173736574
7322204f4e2061737365747320464f522044454c455445205553494e4720280d0a20
2045584953545320280d0a2020202053454c45435420312046524f4d2070726f6669
6c65730d0a2020202057484552452070726f66696c65732e6964203d20617574682e
75696428290d0a20202020414e44202870726f66696c65732e726f6c6520494e2028
2773757065725f61646d696e272c202761646d696e2729290d0a2020290d0a290000
01312d2d2041737365742061737369676e6d656e747320706f6c69636965730d0a43
524541544520504f4c494359202255736572732063616e2076696577207468656972
206f776e2061737365742061737369676e6d656e747322204f4e2061737365745f61
737369676e6d656e747320464f522053454c454354205553494e4720280d0a202061
737369676e65645f746f203d20617574682e7569642829204f520d0a202045584953
545320280d0a2020202053454c45435420312046524f4d2070726f66696c65730d0a
2020202057484552452070726f66696c65732e6964203d20617574682e7569642829
0d0a20202020414e44202870726f66696c65732e726f6c6520494e20282773757065
725f61646d696e272c202761646d696e272c20276c6561642729290d0a2020290d0a
29000000f943524541544520504f4c49435920224f6e6c792073757065725f61646d
696e2f61646d696e2063616e206372656174652061737365742061737369676e6d65
6e747322204f4e2061737365745f61737369676e6d656e747320464f5220494e5345
5254205749544820434845434b20280d0a202045584953545320280d0a2020202053
454c45435420312046524f4d2070726f66696c65730d0a2020202057484552452070
726f66696c65732e6964203d20617574682e75696428290d0a20202020414e442028
70726f66696c65732e726f6c6520494e20282773757065725f61646d696e272c2027
61646d696e2729290d0a2020290d0a29000000f443524541544520504f4c49435920
224f6e6c792073757065725f61646d696e2f61646d696e2063616e20757064617465
2061737365742061737369676e6d656e747322204f4e2061737365745f6173736967
6e6d656e747320464f5220555044415445205553494e4720280d0a20204558495354
5320280d0a2020202053454c45435420312046524f4d2070726f66696c65730d0a20
20202057484552452070726f66696c65732e6964203d20617574682e75696428290d
0a20202020414e44202870726f66696c65732e726f6c6520494e2028277375706572
5f61646d696e272c202761646d696e2729290d0a2020290d0a29000000fb2d2d203d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d0d0a2d2d20547269676765727320666f722055706461746564
2041740d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a435245415445205452494747
4552207570646174655f6173736574735f757064617465645f6174204245464f5245
20555044415445204f4e206173736574730d0a2020464f52204541434820524f5720
455845435554452046554e4354494f4e207570646174655f757064617465645f6174
5f636f6c756d6e28290000009e2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20477261
6e74205065726d697373696f6e730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a47
52414e5420414c4c204f4e2061737365747320544f2061757468656e746963617465
640000002f4752414e5420414c4c204f4e2061737365745f61737369676e6d656e74
7320544f2061757468656e74696361746564"}],"ResultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 
20200101000003_create_assign_asset_function.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Create transactional function for assigning assets\r\nDROP FUNCTION 
IF EXISTS assign_asset(uuid, uuid, uuid, 
text)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
assign_asset(\r\n  p_asset_id uuid,\r\n  p_assigned_to uuid,\r\n  
p_assigned_by uuid,\r\n  p_assignment_notes text DEFAULT 
NULL\r\n)\r\nRETURNS uuid\r\nLANGUAGE plpgsql\r\nSECURITY 
DEFINER\r\nSET search_path = public\r\nAS $$\r\nDECLARE\r\n  
previous_assigned_to uuid;\r\nBEGIN\r\n  -- Lock any current 
assignments for this asset\r\n  SELECT assigned_to\r\n  INTO 
previous_assigned_to\r\n  FROM asset_assignments\r\n  WHERE 
asset_id = p_asset_id AND is_current = true\r\n  ORDER BY 
assigned_at DESC\r\n  LIMIT 1\r\n  FOR UPDATE;\r\n\r\n  -- Mark all 
existing assignments as not current\r\n  UPDATE 
asset_assignments\r\n  SET\r\n    is_current = false,\r\n    
handed_over_at = NOW(),\r\n    handover_notes = 'Reassigned via 
assign_asset()'\r\n  WHERE asset_id = p_asset_id AND is_current = 
true;\r\n\r\n  -- Insert the new assignment\r\n  INSERT INTO 
asset_assignments (\r\n    asset_id,\r\n    assigned_to,\r\n    
assigned_from,\r\n    assigned_by,\r\n    assignment_notes,\r\n    
is_current\r\n  )\r\n  VALUES (\r\n    p_asset_id,\r\n    
p_assigned_to,\r\n    previous_assigned_to,\r\n    
p_assigned_by,\r\n    p_assignment_notes,\r\n    true\r\n  
);\r\n\r\n  -- Ensure asset status is marked as assigned\r\n  
UPDATE assets\r\n  SET status = 'assigned'\r\n  WHERE id = 
p_asset_id;\r\n\r\n  RETURN 
previous_assigned_to;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Grant execute permission to authenticated users\r\nGRANT EXECUTE ON 
FUNCTION assign_asset(uuid, uuid, uuid, text) TO 
authenticated","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Grant execute permission to anon users (if needed for service 
role)\r\nGRANT EXECUTE ON FUNCTION assign_asset(uuid, uuid, uuid, 
text) TO anon","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20200101000003"},{"text":"create_assign_asset_function"},{"b
inary":"0000000100000000000000190000000400000001000000732d2d20437265
617465207472616e73616374696f6e616c2066756e6374696f6e20666f7220617373
69676e696e67206173736574730d0a44524f502046554e4354494f4e204946204558
495354532061737369676e5f617373657428757569642c20757569642c2075756964
2c207465787429000004e0435245415445204f52205245504c4143452046554e4354
494f4e2061737369676e5f6173736574280d0a2020705f61737365745f6964207575
69642c0d0a2020705f61737369676e65645f746f20757569642c0d0a2020705f6173
7369676e65645f627920757569642c0d0a2020705f61737369676e6d656e745f6e6f
74657320746578742044454641554c54204e554c4c0d0a290d0a52455455524e5320
757569640d0a4c414e475541474520706c706773716c0d0a53454355524954592044
4546494e45520d0a534554207365617263685f70617468203d207075626c69630d0a
41532024240d0a4445434c4152450d0a202070726576696f75735f61737369676e65
645f746f20757569643b0d0a424547494e0d0a20202d2d204c6f636b20616e792063
757272656e742061737369676e6d656e747320666f7220746869732061737365740d
0a202053454c4543542061737369676e65645f746f0d0a2020494e544f2070726576
696f75735f61737369676e65645f746f0d0a202046524f4d2061737365745f617373
69676e6d656e74730d0a202057484552452061737365745f6964203d20705f617373
65745f696420414e442069735f63757272656e74203d20747275650d0a20204f5244
45522042592061737369676e65645f617420444553430d0a20204c494d495420310d
0a2020464f52205550444154453b0d0a0d0a20202d2d204d61726b20616c6c206578
697374696e672061737369676e6d656e7473206173206e6f742063757272656e740d
0a20205550444154452061737365745f61737369676e6d656e74730d0a2020534554
0d0a2020202069735f63757272656e74203d2066616c73652c0d0a2020202068616e
6465645f6f7665725f6174203d204e4f5728292c0d0a2020202068616e646f766572
5f6e6f746573203d2027526561737369676e6564207669612061737369676e5f6173
7365742829270d0a202057484552452061737365745f6964203d20705f6173736574
5f696420414e442069735f63757272656e74203d20747275653b0d0a0d0a20202d2d
20496e7365727420746865206e65772061737369676e6d656e740d0a2020494e5345
525420494e544f2061737365745f61737369676e6d656e747320280d0a2020202061
737365745f69642c0d0a2020202061737369676e65645f746f2c0d0a202020206173
7369676e65645f66726f6d2c0d0a2020202061737369676e65645f62792c0d0a2020
202061737369676e6d656e745f6e6f7465732c0d0a2020202069735f63757272656e
740d0a2020290d0a202056414c55455320280d0a20202020705f61737365745f6964
2c0d0a20202020705f61737369676e65645f746f2c0d0a2020202070726576696f75
735f61737369676e65645f746f2c0d0a20202020705f61737369676e65645f62792c
0d0a20202020705f61737369676e6d656e745f6e6f7465732c0d0a20202020747275
650d0a2020293b0d0a0d0a20202d2d20456e73757265206173736574207374617475
73206973206d61726b65642061732061737369676e65640d0a202055504441544520
6173736574730d0a202053455420737461747573203d202761737369676e6564270d
0a20205748455245206964203d20705f61737365745f69643b0d0a0d0a2020524554
55524e2070726576696f75735f61737369676e65645f746f3b0d0a454e443b0d0a24
24000000832d2d204772616e742065786563757465207065726d697373696f6e2074
6f2061757468656e746963617465642075736572730d0a4752414e54204558454355
5445204f4e2046554e4354494f4e2061737369676e5f617373657428757569642c20
757569642c20757569642c20746578742920544f2061757468656e74696361746564
0000008e2d2d204772616e742065786563757465207065726d697373696f6e20746f
20616e6f6e20757365727320286966206e656564656420666f722073657276696365
20726f6c65290d0a4752414e542045584543555445204f4e2046554e4354494f4e20
61737369676e5f617373657428757569642c20757569642c20757569642c20746578
742920544f20616e6f6e"}],"ResultFormatCodes":[]}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"00000","Message":"function 
assign_asset(uuid,uuid,uuid,text) does not exist, skipping","Detail"
:"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","
Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeNa
me":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":
"does_not_exist_skipping","UnknownFields":null}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): function assign_asset(uuid,uuid,uuid,text) does not 
exist, skipping
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20210101000031_create_system_settings.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Create system_settings table for managing system-wide 
settings\r\nCREATE TABLE IF NOT EXISTS system_settings (\r\n  id 
UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  setting_key TEXT 
UNIQUE NOT NULL,\r\n  setting_value JSONB NOT NULL DEFAULT 
'{}',\r\n  description TEXT,\r\n  updated_at TIMESTAMPTZ DEFAULT 
now(),\r\n  updated_by UUID REFERENCES auth.users(id),\r\n  
created_at TIMESTAMPTZ DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Enable RLS\r\nALTER TABLE system_settings ENABLE ROW LEVEL 
SECURITY","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Only super_admins can read/write system settings\r\nCREATE POLICY 
\"Super admins can view system settings\"\r\n  ON 
system_settings\r\n  FOR SELECT\r\n  TO authenticated\r\n  USING 
(\r\n    EXISTS (\r\n      SELECT 1 FROM profiles\r\n      WHERE 
profiles.id = auth.uid()\r\n      AND profiles.role = 
'super_admin'\r\n    )\r\n  )","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Super admins can 
update system settings\"\r\n  ON system_settings\r\n  FOR 
UPDATE\r\n  TO authenticated\r\n  USING (\r\n    EXISTS (\r\n      
SELECT 1 FROM profiles\r\n      WHERE profiles.id = auth.uid()\r\n  
    AND profiles.role = 'super_admin'\r\n    )\r\n  )\r\n  WITH 
CHECK (\r\n    EXISTS (\r\n      SELECT 1 FROM profiles\r\n      
WHERE profiles.id = auth.uid()\r\n      AND profiles.role = 
'super_admin'\r\n    )\r\n  )","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE POLICY \"Super admins can 
insert system settings\"\r\n  ON system_settings\r\n  FOR 
INSERT\r\n  TO authenticated\r\n  WITH CHECK (\r\n    EXISTS (\r\n  
    SELECT 1 FROM profiles\r\n      WHERE profiles.id = 
auth.uid()\r\n      AND profiles.role = 'super_admin'\r\n    )\r\n  
)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Insert default settings\r\nINSERT INTO system_settings 
(setting_key, setting_value, description)\r\nVALUES \r\n  
('shutdown_mode', '{\"enabled\": false, \"message\": \"This service 
has been discontinued as of December 2, 2024.\", \"title\": 
\"Service Discontinued\"}'::jsonb, 'Controls whether the 
application is in shutdown mode'),\r\n  ('maintenance_mode', 
'{\"enabled\": false, \"message\": \"We are currently performing 
scheduled maintenance. Please check back soon.\", \"title\": 
\"Maintenance Mode\", \"estimated_end\": null}'::jsonb, 'Controls 
whether the application is in maintenance mode')\r\nON CONFLICT 
(setting_key) DO NOTHING","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Create index for faster lookups\r\nCREATE INDEX IF NOT EXISTS 
idx_system_settings_key ON 
system_settings(setting_key)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Create function to get system setting\r\nCREATE OR REPLACE FUNCTION 
get_system_setting(key TEXT)\r\nRETURNS JSONB\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nAS $$\r\nDECLARE\r\n  result 
JSONB;\r\nBEGIN\r\n  SELECT setting_value INTO result\r\n  FROM 
system_settings\r\n  WHERE setting_key = key;\r\n  \r\n  RETURN 
COALESCE(result, '{}'::jsonb);\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Create function to update system setting (for super admins 
only)\r\nCREATE OR REPLACE FUNCTION update_system_setting(\r\n  key 
TEXT,\r\n  value JSONB,\r\n  user_id UUID DEFAULT 
auth.uid()\r\n)\r\nRETURNS BOOLEAN\r\nLANGUAGE plpgsql\r\nSECURITY 
DEFINER\r\nAS $$\r\nDECLARE\r\n  is_super_admin 
BOOLEAN;\r\nBEGIN\r\n  -- Check if user is super admin\r\n  SELECT 
EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE id = 
user_id\r\n    AND role = 'super_admin'\r\n  ) INTO 
is_super_admin;\r\n  \r\n  IF NOT is_super_admin THEN\r\n    RAISE 
EXCEPTION 'Only super admins can update system settings';\r\n  END 
IF;\r\n  \r\n  -- Update or insert the setting\r\n  INSERT INTO 
system_settings (setting_key, setting_value, updated_by)\r\n  
VALUES (key, value, user_id)\r\n  ON CONFLICT (setting_key)\r\n  DO 
UPDATE SET\r\n    setting_value = EXCLUDED.setting_value,\r\n    
updated_by = EXCLUDED.updated_by,\r\n    updated_at = now();\r\n  
\r\n  RETURN TRUE;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20210101000031"},{"text":"create_system_settings"},{"binary"
:"00000001000000000000001900000009000000010000018b2d2d20437265617465
2073797374656d5f73657474696e6773207461626c6520666f72206d616e6167696e
672073797374656d2d776964652073657474696e67730d0a43524541544520544142
4c45204946204e4f54204558495354532073797374656d5f73657474696e67732028
0d0a202069642055554944205052494d415259204b45592044454641554c54206765
6e5f72616e646f6d5f7575696428292c0d0a202073657474696e675f6b6579205445
585420554e49515545204e4f54204e554c4c2c0d0a202073657474696e675f76616c
7565204a534f4e42204e4f54204e554c4c2044454641554c5420277b7d272c0d0a20
206465736372697074696f6e20544558542c0d0a2020757064617465645f61742054
494d455354414d50545a2044454641554c54206e6f7728292c0d0a20207570646174
65645f62792055554944205245464552454e43455320617574682e75736572732869
64292c0d0a2020637265617465645f61742054494d455354414d50545a2044454641
554c54206e6f7728290d0a29000000442d2d20456e61626c6520524c530d0a414c54
4552205441424c452073797374656d5f73657474696e677320454e41424c4520524f
57204c4556454c205345435552495459000001342d2d204f6e6c792073757065725f
61646d696e732063616e20726561642f77726974652073797374656d207365747469
6e67730d0a43524541544520504f4c494359202253757065722061646d696e732063
616e20766965772073797374656d2073657474696e6773220d0a20204f4e20737973
74656d5f73657474696e67730d0a2020464f522053454c4543540d0a2020544f2061
757468656e746963617465640d0a20205553494e4720280d0a202020204558495354
5320280d0a20202020202053454c45435420312046524f4d2070726f66696c65730d
0a20202020202057484552452070726f66696c65732e6964203d20617574682e7569
6428290d0a202020202020414e442070726f66696c65732e726f6c65203d20277375
7065725f61646d696e270d0a20202020290d0a202029000001984352454154452050
4f4c494359202253757065722061646d696e732063616e2075706461746520737973
74656d2073657474696e6773220d0a20204f4e2073797374656d5f73657474696e67
730d0a2020464f52205550444154450d0a2020544f2061757468656e746963617465
640d0a20205553494e4720280d0a2020202045584953545320280d0a202020202020
53454c45435420312046524f4d2070726f66696c65730d0a20202020202057484552
452070726f66696c65732e6964203d20617574682e75696428290d0a202020202020
414e442070726f66696c65732e726f6c65203d202773757065725f61646d696e270d
0a20202020290d0a2020290d0a20205749544820434845434b20280d0a2020202045
584953545320280d0a20202020202053454c45435420312046524f4d2070726f6669
6c65730d0a20202020202057484552452070726f66696c65732e6964203d20617574
682e75696428290d0a202020202020414e442070726f66696c65732e726f6c65203d
202773757065725f61646d696e270d0a20202020290d0a2020290000010643524541
544520504f4c494359202253757065722061646d696e732063616e20696e73657274
2073797374656d2073657474696e6773220d0a20204f4e2073797374656d5f736574
74696e67730d0a2020464f5220494e534552540d0a2020544f2061757468656e7469
63617465640d0a20205749544820434845434b20280d0a2020202045584953545320
280d0a20202020202053454c45435420312046524f4d2070726f66696c65730d0a20
202020202057484552452070726f66696c65732e6964203d20617574682e75696428
290d0a202020202020414e442070726f66696c65732e726f6c65203d202773757065
725f61646d696e270d0a20202020290d0a202029000002622d2d20496e7365727420
64656661756c742073657474696e67730d0a494e5345525420494e544f2073797374
656d5f73657474696e6773202873657474696e675f6b65792c2073657474696e675f
76616c75652c206465736372697074696f6e290d0a56414c554553200d0a20202827
73687574646f776e5f6d6f6465272c20277b22656e61626c6564223a2066616c7365
2c20226d657373616765223a20225468697320736572766963652068617320626565
6e20646973636f6e74696e756564206173206f6620446563656d62657220322c2032
3032342e222c20227469746c65223a20225365727669636520446973636f6e74696e
756564227d273a3a6a736f6e622c2027436f6e74726f6c7320776865746865722074
6865206170706c69636174696f6e20697320696e2073687574646f776e206d6f6465
27292c0d0a202028276d61696e74656e616e63655f6d6f6465272c20277b22656e61
626c6564223a2066616c73652c20226d657373616765223a20225765206172652063
757272656e746c7920706572666f726d696e67207363686564756c6564206d61696e
74656e616e63652e20506c6561736520636865636b206261636b20736f6f6e2e222c
20227469746c65223a20224d61696e74656e616e6365204d6f6465222c2022657374
696d617465645f656e64223a206e756c6c7d273a3a6a736f6e622c2027436f6e7472
6f6c73207768657468657220746865206170706c69636174696f6e20697320696e20
6d61696e74656e616e6365206d6f646527290d0a4f4e20434f4e464c494354202873
657474696e675f6b65792920444f204e4f5448494e47000000762d2d204372656174
6520696e64657820666f7220666173746572206c6f6f6b7570730d0a435245415445
20494e444558204946204e4f5420455849535453206964785f73797374656d5f7365
7474696e67735f6b6579204f4e2073797374656d5f73657474696e67732873657474
696e675f6b6579290000014b2d2d204372656174652066756e6374696f6e20746f20
6765742073797374656d2073657474696e670d0a435245415445204f52205245504c
4143452046554e4354494f4e206765745f73797374656d5f73657474696e67286b65
792054455854290d0a52455455524e53204a534f4e420d0a4c414e47554147452070
6c706773716c0d0a534543555249545920444546494e45520d0a41532024240d0a44
45434c4152450d0a2020726573756c74204a534f4e423b0d0a424547494e0d0a2020
53454c4543542073657474696e675f76616c756520494e544f20726573756c740d0a
202046524f4d2073797374656d5f73657474696e67730d0a20205748455245207365
7474696e675f6b6579203d206b65793b0d0a20200d0a202052455455524e20434f41
4c4553434528726573756c742c20277b7d273a3a6a736f6e62293b0d0a454e443b0d
0a24240000037c2d2d204372656174652066756e6374696f6e20746f207570646174
652073797374656d2073657474696e672028666f722073757065722061646d696e73
206f6e6c79290d0a435245415445204f52205245504c4143452046554e4354494f4e
207570646174655f73797374656d5f73657474696e67280d0a20206b657920544558
542c0d0a202076616c7565204a534f4e422c0d0a2020757365725f69642055554944
2044454641554c5420617574682e75696428290d0a290d0a52455455524e5320424f
4f4c45414e0d0a4c414e475541474520706c706773716c0d0a534543555249545920
444546494e45520d0a41532024240d0a4445434c4152450d0a202069735f73757065
725f61646d696e20424f4f4c45414e3b0d0a424547494e0d0a20202d2d2043686563
6b20696620757365722069732073757065722061646d696e0d0a202053454c454354
2045584953545320280d0a2020202053454c45435420312046524f4d2070726f6669
6c65730d0a202020205748455245206964203d20757365725f69640d0a2020202041
4e4420726f6c65203d202773757065725f61646d696e270d0a20202920494e544f20
69735f73757065725f61646d696e3b0d0a20200d0a20204946204e4f542069735f73
757065725f61646d696e205448454e0d0a2020202052414953452045584345505449
4f4e20274f6e6c792073757065722061646d696e732063616e207570646174652073
797374656d2073657474696e6773273b0d0a2020454e442049463b0d0a20200d0a20
202d2d20557064617465206f7220696e73657274207468652073657474696e670d0a
2020494e5345525420494e544f2073797374656d5f73657474696e67732028736574
74696e675f6b65792c2073657474696e675f76616c75652c20757064617465645f62
79290d0a202056414c55455320286b65792c2076616c75652c20757365725f696429
0d0a20204f4e20434f4e464c494354202873657474696e675f6b6579290d0a202044
4f20555044415445205345540d0a2020202073657474696e675f76616c7565203d20
4558434c554445442e73657474696e675f76616c75652c0d0a202020207570646174
65645f6279203d204558434c554445442e757064617465645f62792c0d0a20202020
757064617465645f6174203d206e6f7728293b0d0a20200d0a202052455455524e20
545255453b0d0a454e443b0d0a2424"}],"ResultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 2"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20210101000035_fix_function_security.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Fix Function Security Issues\r\n-- Add search_path to all SECURITY 
DEFINER functions to prevent privilege escalation\r\n\r\n-- Update 
handle_new_user function\r\nCREATE OR REPLACE FUNCTION 
handle_new_user()\r\nRETURNS TRIGGER\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nBEGIN\r\n  INSERT INTO public.profiles (id, 
first_name, last_name, company_email, role)\r\n  VALUES (\r\n    
NEW.id,\r\n    
COALESCE(NEW.raw_user_meta_data-\u003e\u003e'first_name', ''),\r\n  
  COALESCE(NEW.raw_user_meta_data-\u003e\u003e'last_name', ''),\r\n 
   NEW.email,\r\n    'employee'::user_role\r\n  );\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Update update_asset_issues_updated_at function\r\nCREATE OR REPLACE 
FUNCTION update_asset_issues_updated_at()\r\nRETURNS 
TRIGGER\r\nLANGUAGE plpgsql\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Update log_audit function\r\nCREATE OR REPLACE FUNCTION 
log_audit(\r\n  p_action TEXT,\r\n  p_entity_type TEXT,\r\n  
p_entity_id UUID,\r\n  p_old_values JSONB DEFAULT NULL,\r\n  
p_new_values JSONB DEFAULT NULL\r\n) RETURNS UUID\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nDECLARE\r\n  audit_id UUID;\r\nBEGIN\r\n  
INSERT INTO audit_logs (user_id, action, entity_type, entity_id, 
old_values, new_values)\r\n  VALUES (auth.uid(), p_action, 
p_entity_type, p_entity_id, p_old_values, p_new_values)\r\n  
RETURNING id INTO audit_id;\r\n\r\n  RETURN 
audit_id;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Update create_notification function (if exists)\r\nCREATE OR 
REPLACE FUNCTION create_notification(\r\n  p_user_id UUID,\r\n  
p_type TEXT,\r\n  p_category TEXT,\r\n  p_title TEXT,\r\n  
p_message TEXT,\r\n  p_priority TEXT DEFAULT 'normal',\r\n  
p_action_url TEXT DEFAULT NULL,\r\n  p_action_label TEXT DEFAULT 
NULL,\r\n  p_related_entity_type TEXT DEFAULT NULL,\r\n  
p_related_entity_id UUID DEFAULT NULL,\r\n  p_metadata JSONB 
DEFAULT NULL\r\n) RETURNS UUID\r\nLANGUAGE plpgsql\r\nSECURITY 
DEFINER\r\nSET search_path = public, pg_temp\r\nAS 
$$\r\nDECLARE\r\n  notification_id UUID;\r\nBEGIN\r\n  INSERT INTO 
notifications (\r\n    user_id,\r\n    type,\r\n    category,\r\n   
 title,\r\n    message,\r\n    priority,\r\n    action_url,\r\n    
action_label,\r\n    related_entity_type,\r\n    
related_entity_id,\r\n    metadata\r\n  ) VALUES (\r\n    
p_user_id,\r\n    p_type,\r\n    p_category,\r\n    p_title,\r\n    
p_message,\r\n    p_priority,\r\n    p_action_url,\r\n    
p_action_label,\r\n    p_related_entity_type,\r\n    
p_related_entity_id,\r\n    p_metadata\r\n  ) RETURNING id INTO 
notification_id;\r\n\r\n  RETURN 
notification_id;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Update assign_asset function (if exists)\r\nCREATE OR REPLACE 
FUNCTION assign_asset(\r\n  p_asset_id UUID,\r\n  p_assigned_to 
UUID,\r\n  p_assignment_type TEXT,\r\n  p_assigned_by UUID,\r\n  
p_notes TEXT DEFAULT NULL\r\n) RETURNS UUID\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nDECLARE\r\n  v_assignment_id UUID;\r\n  
v_asset_number TEXT;\r\n  v_asset_name TEXT;\r\nBEGIN\r\n  -- Get 
asset details\r\n  SELECT asset_number, asset_name INTO 
v_asset_number, v_asset_name\r\n  FROM assets\r\n  WHERE id = 
p_asset_id;\r\n\r\n  -- End any current assignments\r\n  UPDATE 
asset_assignments\r\n  SET is_current = FALSE,\r\n      returned_at 
= NOW()\r\n  WHERE asset_id = p_asset_id\r\n    AND is_current = 
TRUE;\r\n\r\n  -- Create new assignment\r\n  INSERT INTO 
asset_assignments (\r\n    asset_id,\r\n    assigned_to,\r\n    
assignment_type,\r\n    assigned_by,\r\n    notes,\r\n    
is_current\r\n  ) VALUES (\r\n    p_asset_id,\r\n    
p_assigned_to,\r\n    p_assignment_type,\r\n    p_assigned_by,\r\n  
  p_notes,\r\n    TRUE\r\n  ) RETURNING id INTO 
v_assignment_id;\r\n\r\n  -- Update asset status\r\n  UPDATE 
assets\r\n  SET status = 'assigned',\r\n      updated_at = 
NOW()\r\n  WHERE id = p_asset_id;\r\n\r\n  -- Create audit log\r\n  
PERFORM log_audit(\r\n    'assign',\r\n    'asset',\r\n    
p_asset_id,\r\n    NULL,\r\n    jsonb_build_object(\r\n      
'assigned_to', p_assigned_to,\r\n      'assignment_type', 
p_assignment_type,\r\n      'assigned_by', p_assigned_by\r\n    
)\r\n  );\r\n\r\n  RETURN 
v_assignment_id;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Update Starlink functions\r\nCREATE OR REPLACE FUNCTION 
get_upcoming_starlink_payments(days_ahead INTEGER DEFAULT 
7)\r\nRETURNS TABLE (\r\n  payment_id UUID,\r\n  site_id UUID,\r\n  
site_name TEXT,\r\n  state TEXT,\r\n  next_payment_due DATE,\r\n  
days_until_due INTEGER,\r\n  invoice_number TEXT,\r\n  amount 
DECIMAL,\r\n  reminder_sent BOOLEAN\r\n)\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT \r\n    
p.id AS payment_id,\r\n    s.id AS site_id,\r\n    s.site_name,\r\n 
   s.state,\r\n    p.next_payment_due,\r\n    (p.next_payment_due - 
CURRENT_DATE)::INTEGER AS days_until_due,\r\n    
p.invoice_number,\r\n    p.amount,\r\n    p.reminder_sent\r\n  FROM 
starlink_payments p\r\n  JOIN starlink_sites s ON p.site_id = 
s.id\r\n  WHERE p.payment_status = 'pending'\r\n    AND 
p.next_payment_due \u003c= CURRENT_DATE + days_ahead\r\n    AND 
p.next_payment_due \u003e= CURRENT_DATE\r\n    AND s.is_active = 
TRUE\r\n  ORDER BY p.next_payment_due 
ASC;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
create_starlink_payment_reminders()\r\nRETURNS INTEGER\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nDECLARE\r\n  v_payment RECORD;\r\n  
v_notification_id UUID;\r\n  v_count INTEGER := 0;\r\n  
v_admin_users UUID[];\r\nBEGIN\r\n  -- Get all admin and 
super_admin users\r\n  SELECT ARRAY_AGG(id) INTO v_admin_users\r\n  
FROM profiles\r\n  WHERE role IN ('admin', 'super_admin');\r\n  
\r\n  -- Loop through payments due in 7 days that haven't had 
reminders sent\r\n  FOR v_payment IN \r\n    SELECT * FROM 
get_upcoming_starlink_payments(7)\r\n    WHERE reminder_sent = 
FALSE\r\n      AND days_until_due \u003c= 7\r\n  LOOP\r\n    -- 
Create notification for each admin user\r\n    FOR i IN 
1..COALESCE(array_length(v_admin_users, 1), 0) LOOP\r\n      SELECT 
create_notification(\r\n        v_admin_users[i],\r\n        
'system',\r\n        'system',\r\n        'Starlink Payment Due 
Soon',\r\n        format('Payment for %s (%s) is due in %s days. 
Invoice: %s. Please raise requisition.',\r\n          
v_payment.site_name,\r\n          v_payment.state,\r\n          
v_payment.days_until_due,\r\n          v_payment.invoice_number\r\n 
       ),\r\n        CASE \r\n          WHEN 
v_payment.days_until_due \u003c= 3 THEN 'urgent'\r\n          WHEN 
v_payment.days_until_due \u003c= 5 THEN 'high'\r\n          ELSE 
'normal'\r\n        END,\r\n        
format('/admin/starlink/payments?payment_id=%s', 
v_payment.payment_id),\r\n        NULL,\r\n        
'starlink_payment',\r\n        v_payment.payment_id,\r\n        
jsonb_build_object(\r\n          'site_name', 
v_payment.site_name,\r\n          'state', v_payment.state,\r\n     
     'due_date', v_payment.next_payment_due,\r\n          'amount', 
v_payment.amount\r\n        )\r\n      ) INTO 
v_notification_id;\r\n    END LOOP;\r\n    \r\n    -- Mark reminder 
as sent\r\n    UPDATE starlink_payments\r\n    SET reminder_sent = 
TRUE,\r\n        reminder_sent_at = NOW()\r\n    WHERE id = 
v_payment.payment_id;\r\n    \r\n    v_count := v_count + 1;\r\n  
END LOOP;\r\n  \r\n  RETURN 
v_count;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
get_starlink_dashboard_stats()\r\nRETURNS JSONB\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nDECLARE\r\n  v_stats JSONB;\r\nBEGIN\r\n  
SELECT jsonb_build_object(\r\n    'total_sites', (SELECT COUNT(*) 
FROM starlink_sites WHERE is_active = TRUE),\r\n    'active_sites', 
(SELECT COUNT(*) FROM starlink_sites WHERE is_active = TRUE),\r\n   
 'total_payments', (SELECT COUNT(*) FROM starlink_payments),\r\n    
'pending_payments', (SELECT COUNT(*) FROM starlink_payments WHERE 
payment_status = 'pending'),\r\n    'overdue_payments', (SELECT 
COUNT(*) FROM starlink_payments WHERE payment_status = 
'overdue'),\r\n    'payments_due_this_week', (\r\n      SELECT 
COUNT(*) \r\n      FROM starlink_payments \r\n      WHERE 
payment_status = 'pending' \r\n        AND next_payment_due BETWEEN 
CURRENT_DATE AND CURRENT_DATE + 7\r\n    ),\r\n    
'payments_due_this_month', (\r\n      SELECT COUNT(*) \r\n      
FROM starlink_payments \r\n      WHERE payment_status = 'pending' 
\r\n        AND next_payment_due BETWEEN CURRENT_DATE AND 
CURRENT_DATE + 30\r\n    ),\r\n    'total_amount_pending', (\r\n    
  SELECT COALESCE(SUM(amount), 0) \r\n      FROM starlink_payments 
\r\n      WHERE payment_status = 'pending'\r\n    ),\r\n    
'upcoming_payments', (\r\n      SELECT jsonb_agg(\r\n        
jsonb_build_object(\r\n          'site_name', site_name,\r\n        
  'state', state,\r\n          'due_date', next_payment_due,\r\n    
      'days_until_due', days_until_due,\r\n          'amount', 
amount\r\n        )\r\n      )\r\n      FROM 
get_upcoming_starlink_payments(7)\r\n    )\r\n  ) INTO v_stats;\r\n 
 \r\n  RETURN v_stats;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
update_overdue_starlink_payments()\r\nRETURNS INTEGER\r\nLANGUAGE 
plpgsql\r\nSECURITY DEFINER\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nDECLARE\r\n  v_count INTEGER;\r\nBEGIN\r\n  
UPDATE starlink_payments\r\n  SET payment_status = 'overdue',\r\n   
   updated_at = NOW()\r\n  WHERE payment_status = 'pending'\r\n    
AND next_payment_due \u003c CURRENT_DATE;\r\n  \r\n  GET 
DIAGNOSTICS v_count = ROW_COUNT;\r\n  RETURN 
v_count;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Refresh PostgREST schema cache\r\nNOTIFY pgrst, 'reload 
schema'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20210101000035"},{"text":"fix_function_security"},{"binary":
"0000000100000000000000190000000a00000001000002522d2d204669782046756
e6374696f6e205365637572697479204973737565730d0a2d2d20416464207365617
263685f7061746820746f20616c6c20534543555249545920444546494e455220667
56e6374696f6e7320746f2070726576656e742070726976696c65676520657363616
c6174696f6e0d0a0d0a2d2d205570646174652068616e646c655f6e65775f7573657
22066756e6374696f6e0d0a435245415445204f52205245504c4143452046554e435
4494f4e2068616e646c655f6e65775f7573657228290d0a52455455524e532054524
9474745520d0a4c414e475541474520706c706773716c0d0a5345435552495459204
44546494e45520d0a534554207365617263685f70617468203d207075626c69632c2
070675f74656d700d0a41532024240d0a424547494e0d0a2020494e5345525420494
e544f207075626c69632e70726f66696c6573202869642c2066697273745f6e616d6
52c206c6173745f6e616d652c20636f6d70616e795f656d61696c2c20726f6c65290
d0a202056414c55455320280d0a202020204e45572e69642c0d0a20202020434f414
c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2766697
273745f6e616d65272c202727292c0d0a20202020434f414c45534345284e45572e7
261775f757365725f6d6574615f646174612d3e3e276c6173745f6e616d65272c202
727292c0d0a202020204e45572e656d61696c2c0d0a20202020277374616666273a3
a757365725f726f6c650d0a2020293b0d0a202052455455524e204e45573b0d0a454
e443b0d0a2424000000f62d2d20557064617465207570646174655f61737365745f6
973737565735f757064617465645f61742066756e6374696f6e0d0a4352454154452
04f52205245504c4143452046554e4354494f4e207570646174655f61737365745f6
973737565735f757064617465645f617428290d0a52455455524e532054524947474
5520d0a4c414e475541474520706c706773716c0d0a534554207365617263685f706
17468203d207075626c69632c2070675f74656d700d0a41532024240d0a424547494
e0d0a20204e45572e757064617465645f6174203d204e4f5728293b0d0a202052455
455524e204e45573b0d0a454e443b0d0a24240000023c2d2d20557064617465206c6
f675f61756469742066756e6374696f6e0d0a435245415445204f52205245504c414
3452046554e4354494f4e206c6f675f6175646974280d0a2020705f616374696f6e2
0544558542c0d0a2020705f656e746974795f7479706520544558542c0d0a2020705
f656e746974795f696420555549442c0d0a2020705f6f6c645f76616c756573204a5
34f4e422044454641554c54204e554c4c2c0d0a2020705f6e65775f76616c7565732
04a534f4e422044454641554c54204e554c4c0d0a292052455455524e53205555494
40d0a4c414e475541474520706c706773716c0d0a534543555249545920444546494
e45520d0a534554207365617263685f70617468203d207075626c69632c2070675f7
4656d700d0a41532024240d0a4445434c4152450d0a202061756469745f696420555
549443b0d0a424547494e0d0a2020494e5345525420494e544f2061756469745f6c6
f67732028757365725f69642c20616374696f6e2c20656e746974795f747970652c2
0656e746974795f69642c206f6c645f76616c7565732c206e65775f76616c7565732
90d0a202056414c5545532028617574682e75696428292c20705f616374696f6e2c2
0705f656e746974795f747970652c20705f656e746974795f69642c20705f6f6c645
f76616c7565732c20705f6e65775f76616c756573290d0a202052455455524e494e4
720696420494e544f2061756469745f69643b0d0a0d0a202052455455524e2061756
469745f69643b0d0a454e443b0d0a2424000004252d2d20557064617465206372656
174655f6e6f74696669636174696f6e2066756e6374696f6e2028696620657869737
473290d0a435245415445204f52205245504c4143452046554e4354494f4e2063726
56174655f6e6f74696669636174696f6e280d0a2020705f757365725f69642055554
9442c0d0a2020705f7479706520544558542c0d0a2020705f63617465676f7279205
44558542c0d0a2020705f7469746c6520544558542c0d0a2020705f6d65737361676
520544558542c0d0a2020705f7072696f7269747920544558542044454641554c542
0276e6f726d616c272c0d0a2020705f616374696f6e5f75726c20544558542044454
641554c54204e554c4c2c0d0a2020705f616374696f6e5f6c6162656c20544558542
044454641554c54204e554c4c2c0d0a2020705f72656c617465645f656e746974795
f7479706520544558542044454641554c54204e554c4c2c0d0a2020705f72656c617
465645f656e746974795f696420555549442044454641554c54204e554c4c2c0d0a2
020705f6d65746164617461204a534f4e422044454641554c54204e554c4c0d0a292
052455455524e5320555549440d0a4c414e475541474520706c706773716c0d0a534
543555249545920444546494e45520d0a534554207365617263685f70617468203d2
07075626c69632c2070675f74656d700d0a41532024240d0a4445434c4152450d0a2
0206e6f74696669636174696f6e5f696420555549443b0d0a424547494e0d0a20204
94e5345525420494e544f206e6f74696669636174696f6e7320280d0a20202020757
365725f69642c0d0a20202020747970652c0d0a2020202063617465676f72792c0d0
a202020207469746c652c0d0a202020206d6573736167652c0d0a202020207072696
f726974792c0d0a20202020616374696f6e5f75726c2c0d0a20202020616374696f6
e5f6c6162656c2c0d0a2020202072656c617465645f656e746974795f747970652c0
d0a2020202072656c617465645f656e746974795f69642c0d0a202020206d6574616
46174610d0a2020292056414c55455320280d0a20202020705f757365725f69642c0
d0a20202020705f747970652c0d0a20202020705f63617465676f72792c0d0a20202
020705f7469746c652c0d0a20202020705f6d6573736167652c0d0a20202020705f7
072696f726974792c0d0a20202020705f616374696f6e5f75726c2c0d0a202020207
05f616374696f6e5f6c6162656c2c0d0a20202020705f72656c617465645f656e746
974795f747970652c0d0a20202020705f72656c617465645f656e746974795f69642
c0d0a20202020705f6d657461646174610d0a2020292052455455524e494e4720696
420494e544f206e6f74696669636174696f6e5f69643b0d0a0d0a202052455455524
e206e6f74696669636174696f6e5f69643b0d0a454e443b0d0a2424000005a82d2d2
05570646174652061737369676e5f61737365742066756e6374696f6e20286966206
57869737473290d0a435245415445204f52205245504c4143452046554e4354494f4
e2061737369676e5f6173736574280d0a2020705f61737365745f696420555549442
c0d0a2020705f61737369676e65645f746f20555549442c0d0a2020705f617373696
76e6d656e745f7479706520544558542c0d0a2020705f61737369676e65645f62792
0555549442c0d0a2020705f6e6f74657320544558542044454641554c54204e554c4
c0d0a292052455455524e5320555549440d0a4c414e475541474520706c706773716
c0d0a534543555249545920444546494e45520d0a534554207365617263685f70617
468203d207075626c69632c2070675f74656d700d0a41532024240d0a4445434c415
2450d0a2020765f61737369676e6d656e745f696420555549443b0d0a2020765f617
37365745f6e756d62657220544558543b0d0a2020765f61737365745f6e616d65205
44558543b0d0a424547494e0d0a20202d2d204765742061737365742064657461696
c730d0a202053454c4543542061737365745f6e756d6265722c2061737365745f6e6
16d6520494e544f20765f61737365745f6e756d6265722c20765f61737365745f6e6
16d650d0a202046524f4d206173736574730d0a20205748455245206964203d20705
f61737365745f69643b0d0a0d0a20202d2d20456e6420616e792063757272656e742
061737369676e6d656e74730d0a20205550444154452061737365745f61737369676
e6d656e74730d0a20205345542069735f63757272656e74203d2046414c53452c0d0
a20202020202072657475726e65645f6174203d204e4f5728290d0a2020574845524
52061737365745f6964203d20705f61737365745f69640d0a20202020414e4420697
35f63757272656e74203d20545255453b0d0a0d0a20202d2d20437265617465206e6
5772061737369676e6d656e740d0a2020494e5345525420494e544f2061737365745
f61737369676e6d656e747320280d0a2020202061737365745f69642c0d0a2020202
061737369676e65645f746f2c0d0a2020202061737369676e6d656e745f747970652
c0d0a2020202061737369676e65645f62792c0d0a202020206e6f7465732c0d0a202
0202069735f63757272656e740d0a2020292056414c55455320280d0a20202020705
f61737365745f69642c0d0a20202020705f61737369676e65645f746f2c0d0a20202
020705f61737369676e6d656e745f747970652c0d0a20202020705f61737369676e6
5645f62792c0d0a20202020705f6e6f7465732c0d0a20202020545255450d0a20202
92052455455524e494e4720696420494e544f20765f61737369676e6d656e745f696
43b0d0a0d0a20202d2d20557064617465206173736574207374617475730d0a20205
55044415445206173736574730d0a202053455420737461747573203d20276173736
9676e6564272c0d0a202020202020757064617465645f6174203d204e4f5728290d0
a20205748455245206964203d20705f61737365745f69643b0d0a0d0a20202d2d204
37265617465206175646974206c6f670d0a2020504552464f524d206c6f675f61756
46974280d0a202020202761737369676e272c0d0a20202020276173736574272c0d0
a20202020705f61737365745f69642c0d0a202020204e554c4c2c0d0a202020206a7
36f6e625f6275696c645f6f626a656374280d0a2020202020202761737369676e656
45f746f272c20705f61737369676e65645f746f2c0d0a20202020202027617373696
76e6d656e745f74797065272c20705f61737369676e6d656e745f747970652c0d0a2
020202020202761737369676e65645f6279272c20705f61737369676e65645f62790
d0a20202020290d0a2020293b0d0a0d0a202052455455524e20765f61737369676e6
d656e745f69643b0d0a454e443b0d0a2424000003bf2d2d205570646174652053746
1726c696e6b2066756e6374696f6e730d0a435245415445204f52205245504c41434
52046554e4354494f4e206765745f7570636f6d696e675f737461726c696e6b5f706
1796d656e747328646179735f616865616420494e54454745522044454641554c542
037290d0a52455455524e53205441424c4520280d0a20207061796d656e745f69642
0555549442c0d0a2020736974655f696420555549442c0d0a2020736974655f6e616
d6520544558542c0d0a2020737461746520544558542c0d0a20206e6578745f70617
96d656e745f64756520444154452c0d0a2020646179735f756e74696c5f647565204
94e54454745522c0d0a2020696e766f6963655f6e756d62657220544558542c0d0a2
020616d6f756e7420444543494d414c2c0d0a202072656d696e6465725f73656e742
0424f4f4c45414e0d0a290d0a4c414e475541474520706c706773716c0d0a5345435
55249545920444546494e45520d0a534554207365617263685f70617468203d20707
5626c69632c2070675f74656d700d0a41532024240d0a424547494e0d0a202052455
455524e2051554552590d0a202053454c454354200d0a20202020702e69642041532
07061796d656e745f69642c0d0a20202020732e696420415320736974655f69642c0
d0a20202020732e736974655f6e616d652c0d0a20202020732e73746174652c0d0a2
0202020702e6e6578745f7061796d656e745f6475652c0d0a2020202028702e6e657
8745f7061796d656e745f647565202d2043555252454e545f44415445293a3a494e5
44547455220415320646179735f756e74696c5f6475652c0d0a20202020702e696e7
66f6963655f6e756d6265722c0d0a20202020702e616d6f756e742c0d0a202020207
02e72656d696e6465725f73656e740d0a202046524f4d20737461726c696e6b5f706
1796d656e747320700d0a20204a4f494e20737461726c696e6b5f736974657320732
04f4e20702e736974655f6964203d20732e69640d0a2020574845524520702e70617
96d656e745f737461747573203d202770656e64696e67270d0a20202020414e44207
02e6e6578745f7061796d656e745f647565203c3d2043555252454e545f444154452
02b20646179735f61686561640d0a20202020414e4420702e6e6578745f7061796d6
56e745f647565203e3d2043555252454e545f444154450d0a20202020414e4420732
e69735f616374697665203d20545255450d0a20204f5244455220425920702e6e657
8745f7061796d656e745f647565204153433b0d0a454e443b0d0a2424000007b3435
245415445204f52205245504c4143452046554e4354494f4e206372656174655f737
461726c696e6b5f7061796d656e745f72656d696e6465727328290d0a52455455524
e5320494e54454745520d0a4c414e475541474520706c706773716c0d0a534543555
249545920444546494e45520d0a534554207365617263685f70617468203d2070756
26c69632c2070675f74656d700d0a41532024240d0a4445434c4152450d0a2020765
f7061796d656e74205245434f52443b0d0a2020765f6e6f74696669636174696f6e5
f696420555549443b0d0a2020765f636f756e7420494e5445474552203a3d20303b0
d0a2020765f61646d696e5f757365727320555549445b5d3b0d0a424547494e0d0a2
0202d2d2047657420616c6c2061646d696e20616e642073757065725f61646d696e2
075736572730d0a202053454c4543542041525241595f4147472869642920494e544
f20765f61646d696e5f75736572730d0a202046524f4d2070726f66696c65730d0a2
020574845524520726f6c6520494e20282761646d696e272c202773757065725f616
46d696e27293b0d0a20200d0a20202d2d204c6f6f70207468726f756768207061796
d656e74732064756520696e20372064617973207468617420686176656e277420686
1642072656d696e646572732073656e740d0a2020464f5220765f7061796d656e742
0494e200d0a2020202053454c454354202a2046524f4d206765745f7570636f6d696
e675f737461726c696e6b5f7061796d656e74732837290d0a2020202057484552452
072656d696e6465725f73656e74203d2046414c53450d0a202020202020414e44206
46179735f756e74696c5f647565203c3d20370d0a20204c4f4f500d0a202020202d2
d20437265617465206e6f74696669636174696f6e20666f7220656163682061646d6
96e20757365720d0a20202020464f52206920494e20312e2e434f414c45534345286
1727261795f6c656e67746828765f61646d696e5f75736572732c2031292c2030292
04c4f4f500d0a20202020202053454c454354206372656174655f6e6f74696669636
174696f6e280d0a2020202020202020765f61646d696e5f75736572735b695d2c0d0
a20202020202020202773797374656d272c0d0a20202020202020202773797374656
d272c0d0a202020202020202027537461726c696e6b205061796d656e74204475652
0536f6f6e272c0d0a2020202020202020666f726d617428275061796d656e7420666
f7220257320282573292069732064756520696e20257320646179732e20496e766f6
963653a2025732e20506c65617365207261697365207265717569736974696f6e2e2
72c0d0a20202020202020202020765f7061796d656e742e736974655f6e616d652c0
d0a20202020202020202020765f7061796d656e742e73746174652c0d0a202020202
02020202020765f7061796d656e742e646179735f756e74696c5f6475652c0d0a202
02020202020202020765f7061796d656e742e696e766f6963655f6e756d6265720d0
a2020202020202020292c0d0a202020202020202043415345200d0a2020202020202
02020205748454e20765f7061796d656e742e646179735f756e74696c5f647565203
c3d2033205448454e2027757267656e74270d0a202020202020202020205748454e2
0765f7061796d656e742e646179735f756e74696c5f647565203c3d2035205448454
e202768696768270d0a20202020202020202020454c534520276e6f726d616c270d0
a2020202020202020454e442c0d0a2020202020202020666f726d617428272f61646
d696e2f737461726c696e6b2f7061796d656e74733f7061796d656e745f69643d257
3272c20765f7061796d656e742e7061796d656e745f6964292c0d0a2020202020202
0204e554c4c2c0d0a202020202020202027737461726c696e6b5f7061796d656e742
72c0d0a2020202020202020765f7061796d656e742e7061796d656e745f69642c0d0
a20202020202020206a736f6e625f6275696c645f6f626a656374280d0a202020202
0202020202027736974655f6e616d65272c20765f7061796d656e742e736974655f6
e616d652c0d0a20202020202020202020277374617465272c20765f7061796d656e7
42e73746174652c0d0a20202020202020202020276475655f64617465272c20765f7
061796d656e742e6e6578745f7061796d656e745f6475652c0d0a202020202020202
0202027616d6f756e74272c20765f7061796d656e742e616d6f756e740d0a2020202
020202020290d0a2020202020202920494e544f20765f6e6f74696669636174696f6
e5f69643b0d0a20202020454e44204c4f4f503b0d0a202020200d0a202020202d2d2
04d61726b2072656d696e6465722061732073656e740d0a202020205550444154452
0737461726c696e6b5f7061796d656e74730d0a202020205345542072656d696e646
5725f73656e74203d20545255452c0d0a202020202020202072656d696e6465725f7
3656e745f6174203d204e4f5728290d0a202020205748455245206964203d20765f7
061796d656e742e7061796d656e745f69643b0d0a202020200d0a20202020765f636
f756e74203a3d20765f636f756e74202b20313b0d0a2020454e44204c4f4f503b0d0
a20200d0a202052455455524e20765f636f756e743b0d0a454e443b0d0a242400000
63d435245415445204f52205245504c4143452046554e4354494f4e206765745f737
461726c696e6b5f64617368626f6172645f737461747328290d0a52455455524e532
04a534f4e420d0a4c414e475541474520706c706773716c0d0a53454355524954592
0444546494e45520d0a534554207365617263685f70617468203d207075626c69632
c2070675f74656d700d0a41532024240d0a4445434c4152450d0a2020765f7374617
473204a534f4e423b0d0a424547494e0d0a202053454c454354206a736f6e625f627
5696c645f6f626a656374280d0a2020202027746f74616c5f7369746573272c20285
3454c45435420434f554e54282a292046524f4d20737461726c696e6b5f736974657
32057484552452069735f616374697665203d2054525545292c0d0a2020202027616
3746976655f7369746573272c202853454c45435420434f554e54282a292046524f4
d20737461726c696e6b5f73697465732057484552452069735f616374697665203d2
054525545292c0d0a2020202027746f74616c5f7061796d656e7473272c202853454
c45435420434f554e54282a292046524f4d20737461726c696e6b5f7061796d656e7
473292c0d0a202020202770656e64696e675f7061796d656e7473272c202853454c4
5435420434f554e54282a292046524f4d20737461726c696e6b5f7061796d656e747
3205748455245207061796d656e745f737461747573203d202770656e64696e67272
92c0d0a20202020276f7665726475655f7061796d656e7473272c202853454c45435
420434f554e54282a292046524f4d20737461726c696e6b5f7061796d656e7473205
748455245207061796d656e745f737461747573203d20276f76657264756527292c0
d0a20202020277061796d656e74735f6475655f746869735f7765656b272c20280d0
a20202020202053454c45435420434f554e54282a29200d0a20202020202046524f4
d20737461726c696e6b5f7061796d656e7473200d0a2020202020205748455245207
061796d656e745f737461747573203d202770656e64696e6727200d0a20202020202
02020414e44206e6578745f7061796d656e745f647565204245545745454e2043555
252454e545f4441544520414e442043555252454e545f44415445202b20370d0a202
02020292c0d0a20202020277061796d656e74735f6475655f746869735f6d6f6e746
8272c20280d0a20202020202053454c45435420434f554e54282a29200d0a2020202
0202046524f4d20737461726c696e6b5f7061796d656e7473200d0a2020202020205
748455245207061796d656e745f737461747573203d202770656e64696e6727200d0
a2020202020202020414e44206e6578745f7061796d656e745f64756520424554574
5454e2043555252454e545f4441544520414e442043555252454e545f44415445202
b2033300d0a20202020292c0d0a2020202027746f74616c5f616d6f756e745f70656
e64696e67272c20280d0a20202020202053454c45435420434f414c4553434528535
54d28616d6f756e74292c203029200d0a20202020202046524f4d20737461726c696
e6b5f7061796d656e7473200d0a2020202020205748455245207061796d656e745f7
37461747573203d202770656e64696e67270d0a20202020292c0d0a2020202027757
0636f6d696e675f7061796d656e7473272c20280d0a20202020202053454c4543542
06a736f6e625f616767280d0a20202020202020206a736f6e625f6275696c645f6f6
26a656374280d0a2020202020202020202027736974655f6e616d65272c207369746
55f6e616d652c0d0a20202020202020202020277374617465272c2073746174652c0
d0a20202020202020202020276475655f64617465272c206e6578745f7061796d656
e745f6475652c0d0a2020202020202020202027646179735f756e74696c5f6475652
72c20646179735f756e74696c5f6475652c0d0a2020202020202020202027616d6f7
56e74272c20616d6f756e740d0a2020202020202020290d0a202020202020290d0a2
0202020202046524f4d206765745f7570636f6d696e675f737461726c696e6b5f706
1796d656e74732837290d0a20202020290d0a20202920494e544f20765f737461747
33b0d0a20200d0a202052455455524e20765f73746174733b0d0a454e443b0d0a242
4000001b0435245415445204f52205245504c4143452046554e4354494f4e2075706
46174655f6f7665726475655f737461726c696e6b5f7061796d656e747328290d0a5
2455455524e5320494e54454745520d0a4c414e475541474520706c706773716c0d0
a534543555249545920444546494e45520d0a534554207365617263685f706174682
03d207075626c69632c2070675f74656d700d0a41532024240d0a4445434c4152450
d0a2020765f636f756e7420494e54454745523b0d0a424547494e0d0a20205550444
1544520737461726c696e6b5f7061796d656e74730d0a2020534554207061796d656
e745f737461747573203d20276f766572647565272c0d0a202020202020757064617
465645f6174203d204e4f5728290d0a20205748455245207061796d656e745f73746
1747573203d202770656e64696e67270d0a20202020414e44206e6578745f7061796
d656e745f647565203c2043555252454e545f444154453b0d0a20200d0a202047455
420444941474e4f535449435320765f636f756e74203d20524f575f434f554e543b0
d0a202052455455524e20765f636f756e743b0d0a454e443b0d0a2424000000402d2
d205265667265736820506f7374675245535420736368656d612063616368650d0a4
e4f544946592070677273742c202772656c6f616420736368656d6127"}],"Result
FormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"NOTIFY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 
20210101000036_core_data_model_improvements.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Core Data Model Improvements\r\n-- 1. Add full_name computed column 
to profiles\r\n-- 2. Migrate department from TEXT to foreign 
key\r\n-- 3. Add site column to office_locations\r\n-- 4. Mark 
deprecated device fields\r\n\r\n-- 
=====================================================\r\n-- 1. ADD 
FULL_NAME COMPUTED COLUMN\r\n-- 
=====================================================\r\n\r\nALTER 
TABLE profiles \r\n  ADD COLUMN IF NOT EXISTS full_name TEXT \r\n  
GENERATED ALWAYS AS (\r\n    TRIM(COALESCE(first_name, '') || ' ' 
|| COALESCE(last_name, ''))\r\n  ) STORED","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN 
profiles.full_name IS 'Computed column combining first_name and 
last_name'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 2. 
MIGRATE DEPARTMENT TO FOREIGN KEY\r\n-- 
=====================================================\r\n\r\n-- Add 
new department_id column\r\nALTER TABLE profiles \r\n  ADD COLUMN 
IF NOT EXISTS department_id UUID REFERENCES 
departments(id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Migrate existing data\r\nUPDATE profiles p\r\nSET department_id = 
d.id\r\nFROM departments d\r\nWHERE p.department = 
d.name","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Add index for performance\r\nCREATE INDEX IF NOT EXISTS 
idx_profiles_department_id ON 
profiles(department_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Mark old column as deprecated (keep for backward 
compatibility)\r\nCOMMENT ON COLUMN profiles.department IS 
'DEPRECATED: Use department_id instead. Kept for backward 
compatibility.'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 3. ADD 
SITE COLUMN TO OFFICE_LOCATIONS\r\n-- 
=====================================================\r\n\r\nALTER 
TABLE office_locations \r\n  ADD COLUMN IF NOT EXISTS site 
TEXT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column \"full_name\" of 
relation \"profiles\" already exists, skipping","Detail":"","Hint":"
","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","S
chemaName":"","TableName":"","ColumnName":"","DataTypeName":"","Cons
traintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for
_column_name_collision","UnknownFields":null}
NOTICE (42701): column "full_name" of relation "profiles" already 
exists, skipping
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Set default site for existing records\r\nUPDATE 
office_locations\r\nSET site = 'Head Office'\r\nWHERE site IS 
NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN 
office_locations.site IS 'Site location (e.g., Head Office, Branch 
Office, Remote Site)'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 4. MARK 
DEPRECATED DEVICE FIELDS\r\n-- =====================================
================\r\n\r\nCOMMENT ON COLUMN profiles.device_allocated 
IS 'DEPRECATED: Use assets table instead'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column \"department_id\" of 
relation \"profiles\" already exists, skipping","Detail":"","Hint":"
","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","S
chemaName":"","TableName":"","ColumnName":"","DataTypeName":"","Cons
traintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for
_column_name_collision","UnknownFields":null}
NOTICE (42701): column "department_id" of relation "profiles" 
already exists, skipping
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN 
profiles.device_type IS 'DEPRECATED: Use assets table 
instead'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN 
profiles.device_model IS 'DEPRECATED: Use assets table 
instead'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN 
profiles.devices IS 'DEPRECATED: Use assets table 
instead'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 5. ADD 
INDEXES FOR PERFORMANCE\r\n-- 
=====================================================\r\n\r\nCREATE 
INDEX IF NOT EXISTS idx_profiles_full_name ON 
profiles(full_name)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_office_locations_site ON 
office_locations(site)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Refresh PostgREST schema cache\r\nNOTIFY pgrst, 'reload 
schema'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"42701","Message":"column \"site\" of relation 
\"office_locations\" already exists, skipping","Detail":"","Hint":""
,"Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","Sc
hemaName":"","TableName":"","ColumnName":"","DataTypeName":"","Const
raintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_
column_name_collision","UnknownFields":null}
NOTICE (42701): column "site" of relation "office_locations" 
already exists, skipping
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20210101000036"},{"text":"core_data_model_improvements"},{"b
inary":"00000001000000000000001900000010000000010000021e2d2d20436f72
652044617461204d6f64656c20496d70726f76656d656e74730d0a2d2d20312e2041
64642066756c6c5f6e616d6520636f6d707574656420636f6c756d6e20746f207072
6f66696c65730d0a2d2d20322e204d696772617465206465706172746d656e742066
726f6d205445585420746f20666f726569676e206b65790d0a2d2d20332e20416464
207369746520636f6c756d6e20746f206f66666963655f6c6f636174696f6e730d0a
2d2d20342e204d61726b206465707265636174656420646576696365206669656c64
730d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e
204144442046554c4c5f4e414d4520434f4d505554454420434f4c554d4e0d0a2d2d
203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a414c544552205441424c
452070726f66696c6573200d0a202041444420434f4c554d4e204946204e4f542045
58495354532066756c6c5f6e616d652054455854200d0a202047454e455241544544
20414c5741595320415320280d0a202020205452494d28434f414c45534345286669
7273745f6e616d652c20272729207c7c20272027207c7c20434f414c45534345286c
6173745f6e616d652c20272729290d0a2020292053544f5245440000005c434f4d4d
454e54204f4e20434f4c554d4e2070726f66696c65732e66756c6c5f6e616d652049
532027436f6d707574656420636f6c756d6e20636f6d62696e696e67206669727374
5f6e616d6520616e64206c6173745f6e616d65270000011f2d2d203d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e204d49475241544520444550415254
4d454e5420544f20464f524549474e204b45590d0a2d2d203d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d20416464206e6577206465706172746d656e74
5f696420636f6c756d6e0d0a414c544552205441424c452070726f66696c6573200d
0a202041444420434f4c554d4e204946204e4f542045584953545320646570617274
6d656e745f69642055554944205245464552454e434553206465706172746d656e74
7328696429000000762d2d204d696772617465206578697374696e6720646174610d
0a5550444154452070726f66696c657320700d0a534554206465706172746d656e74
5f6964203d20642e69640d0a46524f4d206465706172746d656e747320640d0a5748
45524520702e6465706172746d656e74203d20642e6e616d650000006e2d2d204164
6420696e64657820666f7220706572666f726d616e63650d0a43524541544520494e
444558204946204e4f5420455849535453206964785f70726f66696c65735f646570
6172746d656e745f6964204f4e2070726f66696c6573286465706172746d656e745f
696429000000b62d2d204d61726b206f6c6420636f6c756d6e206173206465707265
636174656420286b65657020666f72206261636b7761726420636f6d706174696269
6c697479290d0a434f4d4d454e54204f4e20434f4c554d4e2070726f66696c65732e
6465706172746d656e742049532027444550524543415445443a2055736520646570
6172746d656e745f696420696e73746561642e204b65707420666f72206261636b77
61726420636f6d7061746962696c6974792e27000000e42d2d203d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20332e20414444205349544520434f4c554d4e
20544f204f46464943455f4c4f434154494f4e530d0a2d2d203d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d0d0a0d0a414c544552205441424c45206f66666963655f6c
6f636174696f6e73200d0a202041444420434f4c554d4e204946204e4f5420455849
535453207369746520544558540000006f2d2d205365742064656661756c74207369
746520666f72206578697374696e67207265636f7264730d0a555044415445206f66
666963655f6c6f636174696f6e730d0a5345542073697465203d202748656164204f
6666696365270d0a57484552452073697465204953204e554c4c0000006a434f4d4d
454e54204f4e20434f4c554d4e206f66666963655f6c6f636174696f6e732e736974
65204953202753697465206c6f636174696f6e2028652e672e2c2048656164204f66
666963652c204272616e6368204f66666963652c2052656d6f746520536974652927
000000f02d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20342e20
4d41524b204445505245434154454420444556494345204649454c44530d0a2d2d20
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a434f4d4d454e54204f4e20
434f4c554d4e2070726f66696c65732e6465766963655f616c6c6f63617465642049
532027444550524543415445443a2055736520617373657473207461626c6520696e
73746561642700000050434f4d4d454e54204f4e20434f4c554d4e2070726f66696c
65732e6465766963655f747970652049532027444550524543415445443a20557365
20617373657473207461626c6520696e73746561642700000051434f4d4d454e5420
4f4e20434f4c554d4e2070726f66696c65732e6465766963655f6d6f64656c204953
2027444550524543415445443a2055736520617373657473207461626c6520696e73
74656164270000004c434f4d4d454e54204f4e20434f4c554d4e2070726f66696c65
732e646576696365732049532027444550524543415445443a205573652061737365
7473207461626c6520696e737465616427000000e12d2d203d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d0d0a2d2d20352e2041444420494e444558455320464f522050
4552464f524d414e43450d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
0d0a0d0a43524541544520494e444558204946204e4f542045584953545320696478
5f70726f66696c65735f66756c6c5f6e616d65204f4e2070726f66696c6573286675
6c6c5f6e616d65290000004e43524541544520494e444558204946204e4f54204558
49535453206964785f6f66666963655f6c6f636174696f6e735f73697465204f4e20
6f66666963655f6c6f636174696f6e73287369746529000000402d2d205265667265
736820506f7374675245535420736368656d612063616368650d0a4e4f5449465920
70677273742c202772656c6f616420736368656d6127"}],"ResultFormatCodes":
[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"NOTIFY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 
20210101000038_add_search_path_to_remaining_functions.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Final Security Hardening - Fix All Remaining Issues\r\n-- 1. Add 
search_path to all remaining functions\r\n-- 2. Recreate views 
without SECURITY DEFINER\r\n\r\n-- 
=====================================================\r\n-- 1. 
UPDATE ALL TRIGGER FUNCTIONS WITH SEARCH_PATH\r\n-- 
=====================================================\r\n\r\nCREATE 
OR REPLACE FUNCTION update_asset_types_updated_at()\r\nRETURNS 
TRIGGER\r\nLANGUAGE plpgsql\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
update_updated_at_column()\r\nRETURNS TRIGGER\r\nLANGUAGE 
plpgsql\r\nSET search_path = public, pg_temp\r\nAS $$\r\nBEGIN\r\n  
NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
update_asset_assignments_updated_at()\r\nRETURNS 
TRIGGER\r\nLANGUAGE plpgsql\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
update_departments_updated_at()\r\nRETURNS TRIGGER\r\nLANGUAGE 
plpgsql\r\nSET search_path = public, pg_temp\r\nAS $$\r\nBEGIN\r\n  
NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
update_department_payments_updated_at()\r\nRETURNS 
TRIGGER\r\nLANGUAGE plpgsql\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
populate_notification_actor()\r\nRETURNS TRIGGER\r\nLANGUAGE 
plpgsql\r\nSET search_path = public, pg_temp\r\nAS $$\r\nBEGIN\r\n  
IF NEW.actor_id IS NOT NULL AND NEW.actor_name IS NULL THEN\r\n    
SELECT TRIM(COALESCE(first_name, '') || ' ' || COALESCE(last_name, 
''))\r\n    INTO NEW.actor_name\r\n    FROM profiles\r\n    WHERE 
id = NEW.actor_id;\r\n  END IF;\r\n  RETURN 
NEW;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION 
check_asset_deletion_allowed(asset_id UUID)\r\nRETURNS 
BOOLEAN\r\nLANGUAGE plpgsql\r\nSET search_path = public, 
pg_temp\r\nAS $$\r\nDECLARE\r\n  v_has_assignments BOOLEAN;\r\n  
v_has_issues BOOLEAN;\r\nBEGIN\r\n  SELECT EXISTS (\r\n    SELECT 1 
FROM asset_assignments\r\n    WHERE asset_id = 
check_asset_deletion_allowed.asset_id\r\n  ) INTO 
v_has_assignments;\r\n  \r\n  SELECT EXISTS (\r\n    SELECT 1 FROM 
asset_issues\r\n    WHERE asset_id = 
check_asset_deletion_allowed.asset_id\r\n  ) INTO v_has_issues;\r\n 
 \r\n  RETURN NOT (v_has_assignments OR 
v_has_issues);\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Add any other missing functions\r\nCREATE OR REPLACE FUNCTION 
cleanup_old_notifications()\r\nRETURNS INTEGER\r\nLANGUAGE 
plpgsql\r\nSET search_path = public, pg_temp\r\nAS 
$$\r\nDECLARE\r\n  v_deleted_count INTEGER;\r\nBEGIN\r\n  DELETE 
FROM notifications\r\n  WHERE created_at \u003c NOW() - INTERVAL 
'90 days'\r\n    AND is_read = TRUE;\r\n  \r\n  GET DIAGNOSTICS 
v_deleted_count = ROW_COUNT;\r\n  RETURN 
v_deleted_count;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 2. 
RECREATE VIEWS AS SECURITY INVOKER (NOT DEFINER)\r\n-- 
=====================================================\r\n\r\n-- 
Drop existing views\r\nDROP VIEW IF EXISTS office_locations_by_type 
CASCADE","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"DROP VIEW IF EXISTS 
office_location_usage CASCADE","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Recreate as SECURITY INVOKER (default, but explicit)\r\nCREATE VIEW 
office_locations_by_type\r\nWITH (security_invoker = 
true)\r\nAS\r\nSELECT \r\n  id,\r\n  name,\r\n  type,\r\n  
department,\r\n  description,\r\n  is_active,\r\n  CASE\r\n    WHEN 
type = 'department_office' THEN 'Department Office'\r\n    WHEN 
type = 'common_area' THEN 'Common Area'\r\n    WHEN type = 
'conference_room' THEN 'Conference Room'\r\n    WHEN type = 
'office' THEN 'Executive Office'\r\n    ELSE 'Other'\r\n  END AS 
type_label\r\nFROM office_locations\r\nWHERE is_active = 
true\r\nORDER BY\r\n  CASE type\r\n    WHEN 'office' THEN 1\r\n    
WHEN 'department_office' THEN 2\r\n    WHEN 'conference_room' THEN 
3\r\n    WHEN 'common_area' THEN 4\r\n    ELSE 5\r\n  END, 
department, name","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE VIEW 
office_location_usage\r\nWITH (security_invoker = 
true)\r\nAS\r\nSELECT \r\n  ol.name,\r\n  ol.type,\r\n  
ol.department,\r\n  COUNT(a.id) AS asset_count,\r\n  
ol.is_active\r\nFROM office_locations ol\r\nLEFT JOIN assets a ON 
a.office_location = ol.name AND a.assignment_type = 
'office'\r\nGROUP BY ol.id, ol.name, ol.type, ol.department, 
ol.is_active\r\nORDER BY COUNT(a.id) DESC, 
ol.name","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Add comments\r\nCOMMENT ON VIEW office_locations_by_type IS 
'Categorized view of active office locations with type labels 
(SECURITY INVOKER)'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"COMMENT ON VIEW 
office_location_usage IS 'Office locations with asset usage 
statistics (SECURITY INVOKER)'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Refresh PostgREST schema cache\r\nNOTIFY pgrst, 'reload 
schema'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20210101000038"},{"text":"add_search_path_to_remaining_funct
ions"},{"binary":"0000000100000000000000190000000f00000001000002082d
2d2046696e616c2053656375726974792048617264656e696e67202d204669782041
6c6c2052656d61696e696e67204973737565730d0a2d2d20312e2041646420736561
7263685f7061746820746f20616c6c2072656d61696e696e672066756e6374696f6e
730d0a2d2d20322e20526563726561746520766965777320776974686f7574205345
43555249545920444546494e45520d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d0d0a2d2d20312e2055504441544520414c4c20545249474745522046
554e4354494f4e532057495448205345415243485f504154480d0a2d2d203d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a435245415445204f52205245504c41
43452046554e4354494f4e207570646174655f61737365745f74797065735f757064
617465645f617428290d0a52455455524e5320545249474745520d0a4c414e475541
474520706c706773716c0d0a534554207365617263685f70617468203d207075626c
69632c2070675f74656d700d0a41532024240d0a424547494e0d0a20204e45572e75
7064617465645f6174203d204e4f5728293b0d0a202052455455524e204e45573b0d
0a454e443b0d0a2424000000bd435245415445204f52205245504c4143452046554e
4354494f4e207570646174655f757064617465645f61745f636f6c756d6e28290d0a
52455455524e5320545249474745520d0a4c414e475541474520706c706773716c0d
0a534554207365617263685f70617468203d207075626c69632c2070675f74656d70
0d0a41532024240d0a424547494e0d0a20204e45572e757064617465645f6174203d
204e4f5728293b0d0a202052455455524e204e45573b0d0a454e443b0d0a24240000
00c8435245415445204f52205245504c4143452046554e4354494f4e207570646174
655f61737365745f61737369676e6d656e74735f757064617465645f617428290d0a
52455455524e5320545249474745520d0a4c414e475541474520706c706773716c0d
0a534554207365617263685f70617468203d207075626c69632c2070675f74656d70
0d0a41532024240d0a424547494e0d0a20204e45572e757064617465645f6174203d
204e4f5728293b0d0a202052455455524e204e45573b0d0a454e443b0d0a24240000
00c2435245415445204f52205245504c4143452046554e4354494f4e207570646174
655f6465706172746d656e74735f757064617465645f617428290d0a52455455524e
5320545249474745520d0a4c414e475541474520706c706773716c0d0a5345542073
65617263685f70617468203d207075626c69632c2070675f74656d700d0a41532024
240d0a424547494e0d0a20204e45572e757064617465645f6174203d204e4f572829
3b0d0a202052455455524e204e45573b0d0a454e443b0d0a2424000000ca43524541
5445204f52205245504c4143452046554e4354494f4e207570646174655f64657061
72746d656e745f7061796d656e74735f757064617465645f617428290d0a52455455
524e5320545249474745520d0a4c414e475541474520706c706773716c0d0a534554
207365617263685f70617468203d207075626c69632c2070675f74656d700d0a4153
2024240d0a424547494e0d0a20204e45572e757064617465645f6174203d204e4f57
28293b0d0a202052455455524e204e45573b0d0a454e443b0d0a2424000001864352
45415445204f52205245504c4143452046554e4354494f4e20706f70756c6174655f
6e6f74696669636174696f6e5f6163746f7228290d0a52455455524e532054524947
4745520d0a4c414e475541474520706c706773716c0d0a534554207365617263685f
70617468203d207075626c69632c2070675f74656d700d0a41532024240d0a424547
494e0d0a20204946204e45572e6163746f725f6964204953204e4f54204e554c4c20
414e44204e45572e6163746f725f6e616d65204953204e554c4c205448454e0d0a20
20202053454c454354205452494d28434f414c455343452866697273745f6e616d65
2c20272729207c7c20272027207c7c20434f414c45534345286c6173745f6e616d65
2c20272729290d0a20202020494e544f204e45572e6163746f725f6e616d650d0a20
20202046524f4d2070726f66696c65730d0a202020205748455245206964203d204e
45572e6163746f725f69643b0d0a2020454e442049463b0d0a202052455455524e20
4e45573b0d0a454e443b0d0a242400000237435245415445204f52205245504c4143
452046554e4354494f4e20636865636b5f61737365745f64656c6574696f6e5f616c
6c6f7765642861737365745f69642055554944290d0a52455455524e5320424f4f4c
45414e0d0a4c414e475541474520706c706773716c0d0a534554207365617263685f
70617468203d207075626c69632c2070675f74656d700d0a41532024240d0a444543
4c4152450d0a2020765f6861735f61737369676e6d656e747320424f4f4c45414e3b
0d0a2020765f6861735f69737375657320424f4f4c45414e3b0d0a424547494e0d0a
202053454c4543542045584953545320280d0a2020202053454c4543542031204652
4f4d2061737365745f61737369676e6d656e74730d0a202020205748455245206173
7365745f6964203d20636865636b5f61737365745f64656c6574696f6e5f616c6c6f
7765642e61737365745f69640d0a20202920494e544f20765f6861735f6173736967
6e6d656e74733b0d0a20200d0a202053454c4543542045584953545320280d0a2020
202053454c45435420312046524f4d2061737365745f6973737565730d0a20202020
57484552452061737365745f6964203d20636865636b5f61737365745f64656c6574
696f6e5f616c6c6f7765642e61737365745f69640d0a20202920494e544f20765f68
61735f6973737565733b0d0a20200d0a202052455455524e204e4f542028765f6861
735f61737369676e6d656e7473204f5220765f6861735f697373756573293b0d0a45
4e443b0d0a2424000001932d2d2041646420616e79206f74686572206d697373696e
672066756e6374696f6e730d0a435245415445204f52205245504c4143452046554e
4354494f4e20636c65616e75705f6f6c645f6e6f74696669636174696f6e7328290d
0a52455455524e5320494e54454745520d0a4c414e475541474520706c706773716c
0d0a534554207365617263685f70617468203d207075626c69632c2070675f74656d
700d0a41532024240d0a4445434c4152450d0a2020765f64656c657465645f636f75
6e7420494e54454745523b0d0a424547494e0d0a202044454c4554452046524f4d20
6e6f74696669636174696f6e730d0a2020574845524520637265617465645f617420
3c204e4f572829202d20494e54455256414c202739302064617973270d0a20202020
414e442069735f72656164203d20545255453b0d0a20200d0a202047455420444941
474e4f535449435320765f64656c657465645f636f756e74203d20524f575f434f55
4e543b0d0a202052455455524e20765f64656c657465645f636f756e743b0d0a454e
443b0d0a2424000000fa2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a
2d2d20322e2052454352454154452056494557532041532053454355524954592049
4e564f4b455220284e4f5420444546494e4552290d0a2d2d203d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f70206578697374696e6720766965
77730d0a44524f50205649455720494620455849535453206f66666963655f6c6f63
6174696f6e735f62795f7479706520434153434144450000003144524f5020564945
5720494620455849535453206f66666963655f6c6f636174696f6e5f757361676520
43415343414445000002c72d2d205265637265617465206173205345435552495459
20494e564f4b4552202864656661756c742c20627574206578706c69636974290d0a
4352454154452056494557206f66666963655f6c6f636174696f6e735f62795f7479
70650d0a57495448202873656375726974795f696e766f6b6572203d207472756529
0d0a41530d0a53454c454354200d0a202069642c0d0a20206e616d652c0d0a202074
7970652c0d0a20206465706172746d656e742c0d0a20206465736372697074696f6e
2c0d0a202069735f6163746976652c0d0a2020434153450d0a202020205748454e20
74797065203d20276465706172746d656e745f6f666669636527205448454e202744
65706172746d656e74204f6666696365270d0a202020205748454e2074797065203d
2027636f6d6d6f6e5f6172656127205448454e2027436f6d6d6f6e2041726561270d
0a202020205748454e2074797065203d2027636f6e666572656e63655f726f6f6d27
205448454e2027436f6e666572656e636520526f6f6d270d0a202020205748454e20
74797065203d20276f666669636527205448454e2027457865637574697665204f66
66696365270d0a20202020454c534520274f74686572270d0a2020454e4420415320
747970655f6c6162656c0d0a46524f4d206f66666963655f6c6f636174696f6e730d
0a57484552452069735f616374697665203d20747275650d0a4f524445522042590d
0a20204341534520747970650d0a202020205748454e20276f666669636527205448
454e20310d0a202020205748454e20276465706172746d656e745f6f666669636527
205448454e20320d0a202020205748454e2027636f6e666572656e63655f726f6f6d
27205448454e20330d0a202020205748454e2027636f6d6d6f6e5f61726561272054
48454e20340d0a20202020454c534520350d0a2020454e442c206465706172746d65
6e742c206e616d65000001784352454154452056494557206f66666963655f6c6f63
6174696f6e5f75736167650d0a57495448202873656375726974795f696e766f6b65
72203d2074727565290d0a41530d0a53454c454354200d0a20206f6c2e6e616d652c
0d0a20206f6c2e747970652c0d0a20206f6c2e6465706172746d656e742c0d0a2020
434f554e5428612e6964292041532061737365745f636f756e742c0d0a20206f6c2e
69735f6163746976650d0a46524f4d206f66666963655f6c6f636174696f6e73206f
6c0d0a4c454654204a4f494e206173736574732061204f4e20612e6f66666963655f
6c6f636174696f6e203d206f6c2e6e616d6520414e4420612e61737369676e6d656e
745f74797065203d20276f6666696365270d0a47524f5550204259206f6c2e69642c
206f6c2e6e616d652c206f6c2e747970652c206f6c2e6465706172746d656e742c20
6f6c2e69735f6163746976650d0a4f5244455220425920434f554e5428612e696429
20444553432c206f6c2e6e616d650000008e2d2d2041646420636f6d6d656e74730d
0a434f4d4d454e54204f4e2056494557206f66666963655f6c6f636174696f6e735f
62795f74797065204953202743617465676f72697a65642076696577206f66206163
74697665206f6666696365206c6f636174696f6e7320776974682074797065206c61
62656c732028534543555249545920494e564f4b455229270000006a434f4d4d454e
54204f4e2056494557206f66666963655f6c6f636174696f6e5f7573616765204953
20274f6666696365206c6f636174696f6e7320776974682061737365742075736167
6520737461746973746963732028534543555249545920494e564f4b455229270000
00402d2d205265667265736820506f7374675245535420736368656d612063616368
650d0a4e4f544946592070677273742c202772656c6f616420736368656d6127"}],
"ResultFormatCodes":[]}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"00000","Message":"view 
\"office_locations_by_type\" does not exist, skipping","Detail":"","
Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where
":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"
","ConstraintName":"","File":"tablecmds.c","Line":1427,"Routine":"Dr
opErrorMsgNonExistent","UnknownFields":null}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"DROP VIEW"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): view "office_locations_by_type" does not exist, 
skipping
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: {"Severity":"NOTICE","SeverityUnlocaliz
ed":"NOTICE","Code":"00000","Message":"view 
\"office_location_usage\" does not exist, skipping","Detail":"","Hin
t":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"
","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","
ConstraintName":"","File":"tablecmds.c","Line":1427,"Routine":"DropE
rrorMsgNonExistent","UnknownFields":null}
NOTICE (00000): view "office_location_usage" does not exist, 
skipping
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"DROP VIEW"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE VIEW"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"CREATE VIEW"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"NOTIFY"}
2026/02/14 07:22:34 PG Recv: {"Type":"ParseComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"BindComplete"}
2026/02/14 07:22:34 PG Recv: {"Type":"NoData"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20210101000039_data_integrity_constraints.sql...
2026/02/14 07:22:34 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/14 07:22:34 PG Recv: 
{"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Data Integrity Improvements\r\n-- Add NOT NULL constraints, CHECK 
constraints, and clean up orphaned records\r\n\r\n-- 
=====================================================\r\n-- 1. 
CLEAN UP ORPHANED RECORDS\r\n-- 
=====================================================\r\n\r\n-- 
Remove orphaned department_payments (if any)\r\nDELETE FROM 
department_payments\r\nWHERE NOT EXISTS (SELECT 1 FROM departments 
WHERE id = department_payments.department_id)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Remove orphaned asset_assignments\r\nDELETE FROM 
asset_assignments\r\nWHERE NOT EXISTS (SELECT 1 FROM assets WHERE 
id = asset_assignments.asset_id)\r\n   OR NOT EXISTS (SELECT 1 FROM 
profiles WHERE id = 
asset_assignments.assigned_to)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Remove orphaned task assignments\r\nUPDATE tasks\r\nSET assigned_to 
= created_by\r\nWHERE NOT EXISTS (SELECT 1 FROM profiles WHERE id = 
tasks.assigned_to)\r\n  AND EXISTS (SELECT 1 FROM profiles WHERE id 
= tasks.created_by)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 2. ADD 
NOT NULL CONSTRAINTS\r\n-- 
=====================================================\r\n\r\n-- 
Profiles table\r\nALTER TABLE profiles\r\n  ALTER COLUMN 
company_email SET NOT NULL,\r\n  ALTER COLUMN first_name SET NOT 
NULL,\r\n  ALTER COLUMN last_name SET NOT NULL,\r\n  ALTER COLUMN 
role SET NOT NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Department payments table\r\nALTER TABLE department_payments\r\n  
ALTER COLUMN department_id SET NOT NULL,\r\n  ALTER COLUMN title 
SET NOT NULL,\r\n  ALTER COLUMN currency SET NOT NULL,\r\n  ALTER 
COLUMN status SET NOT NULL,\r\n  ALTER COLUMN payment_type SET NOT 
NULL,\r\n  ALTER COLUMN category SET NOT NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Departments table\r\nALTER TABLE departments\r\n  ALTER COLUMN name 
SET NOT NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Office locations table\r\nALTER TABLE office_locations\r\n  ALTER 
COLUMN name SET NOT NULL,\r\n  ALTER COLUMN type SET NOT 
NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Recv: {"Type":"ErrorResponse","Severity":"ERR
OR","SeverityUnlocalized":"ERROR","Code":"42P01","Message":"relation
 \"department_payments\" does not exist","Detail":"","Hint":"","Posi
tion":326,"InternalPosition":0,"InternalQuery":"","Where":"","Schema
Name":"","TableName":"","ColumnName":"","DataTypeName":"","Constrain
tName":"","File":"parse_relation.c","Line":1449,"Routine":"parserOpe
nTable","UnknownFields":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Assets table\r\nALTER TABLE assets\r\n  ALTER COLUMN asset_name SET 
NOT NULL,\r\n  ALTER COLUMN asset_type SET NOT NULL,\r\n  ALTER 
COLUMN status SET NOT NULL,\r\n  ALTER COLUMN created_by SET NOT 
NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Tasks table\r\nALTER TABLE tasks\r\n  ALTER COLUMN title SET NOT 
NULL,\r\n  ALTER COLUMN status SET NOT NULL,\r\n  ALTER COLUMN 
priority SET NOT NULL,\r\n  ALTER COLUMN assigned_to SET NOT 
NULL,\r\n  ALTER COLUMN assigned_by SET NOT 
NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 3. ADD 
CHECK CONSTRAINTS FOR ENUMS\r\n-- 
=====================================================\r\n\r\n-- 
Payment status check\r\nALTER TABLE department_payments\r\n  DROP 
CONSTRAINT IF EXISTS department_payments_status_check,\r\n  ADD 
CONSTRAINT department_payments_status_check \r\n    CHECK (status 
IN ('pending', 'due', 'paid', 'overdue', 
'cancelled'))","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Payment type check\r\nALTER TABLE department_payments\r\n  DROP 
CONSTRAINT IF EXISTS department_payments_payment_type_check,\r\n  
ADD CONSTRAINT department_payments_payment_type_check \r\n    CHECK 
(payment_type IN ('one-time', 'recurring'))","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Recurrence period check\r\nALTER TABLE department_payments\r\n  
DROP CONSTRAINT IF EXISTS department_payments_recurrence_check,\r\n 
 ADD CONSTRAINT department_payments_recurrence_check \r\n    CHECK 
(\r\n      (payment_type = 'one-time' AND recurrence_period IS 
NULL) OR\r\n      (payment_type = 'recurring' AND recurrence_period 
IN ('monthly', 'quarterly', 'yearly'))\r\n    
)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Asset status check\r\nALTER TABLE assets\r\n  DROP CONSTRAINT IF 
EXISTS assets_status_check,\r\n  ADD CONSTRAINT assets_status_check 
\r\n    CHECK (status IN ('available', 'assigned', 'maintenance', 
'retired'))","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Task status check\r\nALTER TABLE tasks\r\n  DROP CONSTRAINT IF 
EXISTS tasks_status_check,\r\n  ADD CONSTRAINT tasks_status_check 
\r\n    CHECK (status IN ('pending', 'in_progress', 'completed', 
'cancelled'))","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Task priority check\r\nALTER TABLE tasks\r\n  DROP CONSTRAINT IF 
EXISTS tasks_priority_check,\r\n  ADD CONSTRAINT 
tasks_priority_check \r\n    CHECK (priority IN ('low', 'medium', 
'high', 'urgent'))","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Office location type check\r\nALTER TABLE office_locations\r\n  
DROP CONSTRAINT IF EXISTS office_locations_type_check,\r\n  ADD 
CONSTRAINT office_locations_type_check \r\n    CHECK (type IN 
('office', 'department_office', 'conference_room', 
'common_area'))","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 4. ADD 
BUSINESS LOGIC CONSTRAINTS\r\n-- 
=====================================================\r\n\r\n-- 
Ensure amount is positive\r\nALTER TABLE department_payments\r\n  
DROP CONSTRAINT IF EXISTS department_payments_amount_positive,\r\n  
ADD CONSTRAINT department_payments_amount_positive \r\n    CHECK 
(amount IS NULL OR amount \u003e= 0)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Ensure amount_paid doesn't exceed amount\r\nALTER TABLE 
department_payments\r\n  DROP CONSTRAINT IF EXISTS 
department_payments_amount_paid_valid,\r\n  ADD CONSTRAINT 
department_payments_amount_paid_valid \r\n    CHECK (amount_paid IS 
NULL OR amount IS NULL OR amount_paid \u003c= 
amount)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Ensure task progress is between 0 and 100\r\nALTER TABLE tasks\r\n  
DROP CONSTRAINT IF EXISTS tasks_progress_valid,\r\n  ADD CONSTRAINT 
tasks_progress_valid \r\n    CHECK (progress \u003e= 0 AND progress 
\u003c= 100)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Ensure email format is valid (basic check)\r\nALTER TABLE 
profiles\r\n  DROP CONSTRAINT IF EXISTS profiles_email_format,\r\n  
ADD CONSTRAINT profiles_email_format \r\n    CHECK (company_email 
~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$')","ParameterO
IDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 5. ADD 
FOREIGN KEY CONSTRAINTS (if not exists)\r\n-- 
=====================================================\r\n\r\n-- 
Department payments -\u003e departments\r\nALTER TABLE 
department_payments\r\n  DROP CONSTRAINT IF EXISTS 
department_payments_department_id_fkey,\r\n  ADD CONSTRAINT 
department_payments_department_id_fkey \r\n    FOREIGN KEY 
(department_id) REFERENCES departments(id) ON DELETE 
RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Department payments -\u003e profiles (created_by)\r\nALTER TABLE 
department_payments\r\n  DROP CONSTRAINT IF EXISTS 
department_payments_created_by_fkey,\r\n  ADD CONSTRAINT 
department_payments_created_by_fkey \r\n    FOREIGN KEY 
(created_by) REFERENCES profiles(id) ON DELETE 
RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Assets -\u003e profiles (created_by)\r\nALTER TABLE assets\r\n  
DROP CONSTRAINT IF EXISTS assets_created_by_fkey,\r\n  ADD 
CONSTRAINT assets_created_by_fkey \r\n    FOREIGN KEY (created_by) 
REFERENCES profiles(id) ON DELETE RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Tasks -\u003e profiles (assigned_to, assigned_by)\r\nALTER TABLE 
tasks\r\n  DROP CONSTRAINT IF EXISTS tasks_assigned_to_fkey,\r\n  
ADD CONSTRAINT tasks_assigned_to_fkey \r\n    FOREIGN KEY 
(assigned_to) REFERENCES profiles(id) ON DELETE 
RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE tasks\r\n  DROP 
CONSTRAINT IF EXISTS tasks_assigned_by_fkey,\r\n  ADD CONSTRAINT 
tasks_assigned_by_fkey \r\n    FOREIGN KEY (assigned_by) REFERENCES 
profiles(id) ON DELETE RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Asset assignments -\u003e assets and profiles\r\nALTER TABLE 
asset_assignments\r\n  DROP CONSTRAINT IF EXISTS 
asset_assignments_asset_id_fkey,\r\n  ADD CONSTRAINT 
asset_assignments_asset_id_fkey \r\n    FOREIGN KEY (asset_id) 
REFERENCES assets(id) ON DELETE CASCADE","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
asset_assignments\r\n  DROP CONSTRAINT IF EXISTS 
asset_assignments_assigned_to_fkey,\r\n  ADD CONSTRAINT 
asset_assignments_assigned_to_fkey \r\n    FOREIGN KEY 
(assigned_to) REFERENCES profiles(id) ON DELETE 
RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"ALTER TABLE 
asset_assignments\r\n  DROP CONSTRAINT IF EXISTS 
asset_assignments_assigned_by_fkey,\r\n  ADD CONSTRAINT 
asset_assignments_assigned_by_fkey \r\n    FOREIGN KEY 
(assigned_by) REFERENCES profiles(id) ON DELETE 
RESTRICT","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 6. ADD 
UNIQUE CONSTRAINTS\r\n-- 
=====================================================\r\n\r\n-- 
Ensure department names are unique\r\nALTER TABLE departments\r\n  
DROP CONSTRAINT IF EXISTS departments_name_unique,\r\n  ADD 
CONSTRAINT departments_name_unique UNIQUE 
(name)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Ensure office location names are unique\r\nALTER TABLE 
office_locations\r\n  DROP CONSTRAINT IF EXISTS 
office_locations_name_unique,\r\n  ADD CONSTRAINT 
office_locations_name_unique UNIQUE (name)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Ensure profile emails are unique\r\nALTER TABLE profiles\r\n  DROP 
CONSTRAINT IF EXISTS profiles_company_email_unique,\r\n  ADD 
CONSTRAINT profiles_company_email_unique UNIQUE 
(company_email)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
=====================================================\r\n-- 7. ADD 
INDEXES FOR PERFORMANCE\r\n-- 
=====================================================\r\n\r\nCREATE 
INDEX IF NOT EXISTS idx_department_payments_status ON 
department_payments(status)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_department_payments_category ON 
department_payments(category)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_department_payments_next_due ON 
department_payments(next_payment_due) WHERE status != 
'cancelled'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_tasks_status ON tasks(status)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_tasks_assigned_to ON tasks(assigned_to)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_tasks_due_date ON tasks(due_date) WHERE status != 'completed' 
AND status != 'cancelled'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_assets_status ON assets(status)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_profiles_role ON profiles(role)","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS 
idx_profiles_department_id ON profiles(department_id) WHERE 
department_id IS NOT NULL","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Parse","Name":"","Query":"-- 
Refresh PostgREST schema cache\r\nNOTIFY pgrst, 'reload 
schema'","ParameterOIDs":null}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"R
esultFormatCodes":[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: 
{"Type":"Parse","Name":"","Query":"INSERT INTO 
supabase_migrations.schema_migrations(version, name, statements) 
VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/14 07:22:34 PG Send: {"Type":"Bind","DestinationPortal":"","
PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{
"text":"20210101000039"},{"text":"data_integrity_constraints"},{"bin
ary":"0000000100000000000000190000002900000001000001b32d2d2044617461
20496e7465677269747920496d70726f76656d656e74730d0a2d2d20416464204e4f
54204e554c4c20636f6e73747261696e74732c20434845434b20636f6e7374726169
6e74732c20616e6420636c65616e207570206f727068616e6564207265636f726473
0d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e20
434c45414e205550204f525048414e4544205245434f5244530d0a2d2d203d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2052656d6f7665206f72706861
6e6564206465706172746d656e745f7061796d656e74732028696620616e79290d0a
44454c4554452046524f4d206465706172746d656e745f7061796d656e74730d0a57
48455245204e4f5420455849535453202853454c45435420312046524f4d20646570
6172746d656e7473205748455245206964203d206465706172746d656e745f706179
6d656e74732e6465706172746d656e745f696429000000e62d2d2052656d6f766520
6f727068616e65642061737365745f61737369676e6d656e74730d0a44454c455445
2046524f4d2061737365745f61737369676e6d656e74730d0a5748455245204e4f54
20455849535453202853454c45435420312046524f4d206173736574732057484552
45206964203d2061737365745f61737369676e6d656e74732e61737365745f696429
0d0a2020204f52204e4f5420455849535453202853454c45435420312046524f4d20
70726f66696c6573205748455245206964203d2061737365745f61737369676e6d65
6e74732e61737369676e65645f746f29000000da2d2d2052656d6f7665206f727068
616e6564207461736b2061737369676e6d656e74730d0a555044415445207461736b
730d0a5345542061737369676e65645f746f203d20637265617465645f62790d0a57
48455245204e4f5420455849535453202853454c45435420312046524f4d2070726f
66696c6573205748455245206964203d207461736b732e61737369676e65645f746f
290d0a2020414e4420455849535453202853454c45435420312046524f4d2070726f
66696c6573205748455245206964203d207461736b732e637265617465645f627929
0000015c2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e20
414444204e4f54204e554c4c20434f4e53545241494e54530d0a2d2d203d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2050726f66696c6573207461626c
650d0a414c544552205441424c452070726f66696c65730d0a2020414c5445522043
4f4c554d4e20636f6d70616e795f656d61696c20534554204e4f54204e554c4c2c0d
0a2020414c54455220434f4c554d4e2066697273745f6e616d6520534554204e4f54
204e554c4c2c0d0a2020414c54455220434f4c554d4e206c6173745f6e616d652053
4554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e20726f6c6520
534554204e4f54204e554c4c0000012a2d2d204465706172746d656e74207061796d
656e7473207461626c650d0a414c544552205441424c45206465706172746d656e74
5f7061796d656e74730d0a2020414c54455220434f4c554d4e206465706172746d65
6e745f696420534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d
4e207469746c6520534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c
554d4e2063757272656e637920534554204e4f54204e554c4c2c0d0a2020414c5445
5220434f4c554d4e2073746174757320534554204e4f54204e554c4c2c0d0a202041
4c54455220434f4c554d4e207061796d656e745f7479706520534554204e4f54204e
554c4c2c0d0a2020414c54455220434f4c554d4e2063617465676f72792053455420
4e4f54204e554c4c0000004f2d2d204465706172746d656e7473207461626c650d0a
414c544552205441424c45206465706172746d656e74730d0a2020414c5445522043
4f4c554d4e206e616d6520534554204e4f54204e554c4c0000007c2d2d204f666669
6365206c6f636174696f6e73207461626c650d0a414c544552205441424c45206f66
666963655f6c6f636174696f6e730d0a2020414c54455220434f4c554d4e206e616d
6520534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e207479
706520534554204e4f54204e554c4c000000c22d2d20417373657473207461626c65
0d0a414c544552205441424c45206173736574730d0a2020414c54455220434f4c55
4d4e2061737365745f6e616d6520534554204e4f54204e554c4c2c0d0a2020414c54
455220434f4c554d4e2061737365745f7479706520534554204e4f54204e554c4c2c
0d0a2020414c54455220434f4c554d4e2073746174757320534554204e4f54204e55
4c4c2c0d0a2020414c54455220434f4c554d4e20637265617465645f627920534554
204e4f54204e554c4c000000e42d2d205461736b73207461626c650d0a414c544552
205441424c45207461736b730d0a2020414c54455220434f4c554d4e207469746c65
20534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e20737461
74757320534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e20
7072696f7269747920534554204e4f54204e554c4c2c0d0a2020414c54455220434f
4c554d4e2061737369676e65645f746f20534554204e4f54204e554c4c2c0d0a2020
414c54455220434f4c554d4e2061737369676e65645f627920534554204e4f54204e
554c4c000001922d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20
332e2041444420434845434b20434f4e53545241494e545320464f5220454e554d53
0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d20506179
6d656e742073746174757320636865636b0d0a414c544552205441424c4520646570
6172746d656e745f7061796d656e74730d0a202044524f5020434f4e53545241494e
5420494620455849535453206465706172746d656e745f7061796d656e74735f7374
617475735f636865636b2c0d0a202041444420434f4e53545241494e542064657061
72746d656e745f7061796d656e74735f7374617475735f636865636b200d0a202020
20434845434b202873746174757320494e20282770656e64696e67272c2027647565
272c202770616964272c20276f766572647565272c202763616e63656c6c65642729
29000000ec2d2d205061796d656e74207479706520636865636b0d0a414c54455220
5441424c45206465706172746d656e745f7061796d656e74730d0a202044524f5020
434f4e53545241494e5420494620455849535453206465706172746d656e745f7061
796d656e74735f7061796d656e745f747970655f636865636b2c0d0a202041444420
434f4e53545241494e54206465706172746d656e745f7061796d656e74735f706179
6d656e745f747970655f636865636b200d0a20202020434845434b20287061796d65
6e745f7479706520494e2028276f6e652d74696d65272c2027726563757272696e67
2729290000016e2d2d20526563757272656e636520706572696f6420636865636b0d
0a414c544552205441424c45206465706172746d656e745f7061796d656e74730d0a
202044524f5020434f4e53545241494e542049462045584953545320646570617274
6d656e745f7061796d656e74735f726563757272656e63655f636865636b2c0d0a20
2041444420434f4e53545241494e54206465706172746d656e745f7061796d656e74
735f726563757272656e63655f636865636b200d0a20202020434845434b20280d0a
202020202020287061796d656e745f74797065203d20276f6e652d74696d65272041
4e4420726563757272656e63655f706572696f64204953204e554c4c29204f520d0a
202020202020287061796d656e745f74797065203d2027726563757272696e672720
414e4420726563757272656e63655f706572696f6420494e2028276d6f6e74686c79
272c2027717561727465726c79272c2027796561726c792729290d0a202020202900
0000cd2d2d2041737365742073746174757320636865636b0d0a414c544552205441
424c45206173736574730d0a202044524f5020434f4e53545241494e542049462045
5849535453206173736574735f7374617475735f636865636b2c0d0a202041444420
434f4e53545241494e54206173736574735f7374617475735f636865636b200d0a20
202020434845434b202873746174757320494e202827617661696c61626c65272c20
2761737369676e6564272c20276d61696e74656e616e6365272c2027726574697265
64272929000000ca2d2d205461736b2073746174757320636865636b0d0a414c5445
52205441424c45207461736b730d0a202044524f5020434f4e53545241494e542049
4620455849535453207461736b735f7374617475735f636865636b2c0d0a20204144
4420434f4e53545241494e54207461736b735f7374617475735f636865636b200d0a
20202020434845434b202873746174757320494e20282770656e64696e67272c2027
696e5f70726f6772657373272c2027636f6d706c65746564272c202763616e63656c
6c6564272929000000c12d2d205461736b207072696f7269747920636865636b0d0a
414c544552205441424c45207461736b730d0a202044524f5020434f4e5354524149
4e5420494620455849535453207461736b735f7072696f726974795f636865636b2c
0d0a202041444420434f4e53545241494e54207461736b735f7072696f726974795f
636865636b200d0a20202020434845434b20287072696f7269747920494e2028276c
6f77272c20276d656469756d272c202768696768272c2027757267656e7427292900
0000fb2d2d204f6666696365206c6f636174696f6e207479706520636865636b0d0a
414c544552205441424c45206f66666963655f6c6f636174696f6e730d0a20204452
4f5020434f4e53545241494e5420494620455849535453206f66666963655f6c6f63
6174696f6e735f747970655f636865636b2c0d0a202041444420434f4e5354524149
4e54206f66666963655f6c6f636174696f6e735f747970655f636865636b200d0a20
202020434845434b20287479706520494e2028276f6666696365272c202764657061
72746d656e745f6f6666696365272c2027636f6e666572656e63655f726f6f6d272c
2027636f6d6d6f6e5f617265612729290000017d2d2d203d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d0d0a2d2d20342e2041444420425553494e455353204c4f474943
20434f4e53545241494e54530d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d0d0a0d0a2d2d20456e7375726520616d6f756e7420697320706f736974697665
0d0a414c544552205441424c45206465706172746d656e745f7061796d656e74730d
0a202044524f5020434f4e53545241494e5420494620455849535453206465706172
746d656e745f7061796d656e74735f616d6f756e745f706f7369746976652c0d0a20
2041444420434f4e53545241494e54206465706172746d656e745f7061796d656e74
735f616d6f756e745f706f736974697665200d0a20202020434845434b2028616d6f
756e74204953204e554c4c204f5220616d6f756e74203e3d203029000001152d2d20
456e7375726520616d6f756e745f7061696420646f65736e27742065786365656420
616d6f756e740d0a414c544552205441424c45206465706172746d656e745f706179
6d656e74730d0a202044524f5020434f4e53545241494e5420494620455849535453
206465706172746d656e745f7061796d656e74735f616d6f756e745f706169645f76
616c69642c0d0a202041444420434f4e53545241494e54206465706172746d656e74
5f7061796d656e74735f616d6f756e745f706169645f76616c6964200d0a20202020
434845434b2028616d6f756e745f70616964204953204e554c4c204f5220616d6f75
6e74204953204e554c4c204f5220616d6f756e745f70616964203c3d20616d6f756e
7429000000c92d2d20456e73757265207461736b2070726f67726573732069732062
65747765656e203020616e64203130300d0a414c544552205441424c45207461736b
730d0a202044524f5020434f4e53545241494e542049462045584953545320746173
6b735f70726f67726573735f76616c69642c0d0a202041444420434f4e5354524149
4e54207461736b735f70726f67726573735f76616c6964200d0a2020202043484543
4b202870726f6772657373203e3d203020414e442070726f6772657373203c3d2031
303029000000f12d2d20456e7375726520656d61696c20666f726d61742069732076
616c69642028626173696320636865636b290d0a414c544552205441424c45207072
6f66696c65730d0a202044524f5020434f4e53545241494e54204946204558495354
532070726f66696c65735f656d61696c5f666f726d61742c0d0a202041444420434f
4e53545241494e542070726f66696c65735f656d61696c5f666f726d6174200d0a20
202020434845434b2028636f6d70616e795f656d61696c207e2a20275e5b412d5a61
2d7a302d392e5f252b2d5d2b405b412d5a612d7a302d392e2d5d2b5c2e5b412d5a61
2d7a5d7b322c7d242729000001bd2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d0d0a2d2d20352e2041444420464f524549474e204b455920434f4e5354524149
4e545320286966206e6f7420657869737473290d0a2d2d203d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d204465706172746d656e74207061796d656e74
73202d3e206465706172746d656e74730d0a414c544552205441424c452064657061
72746d656e745f7061796d656e74730d0a202044524f5020434f4e53545241494e54
20494620455849535453206465706172746d656e745f7061796d656e74735f646570
6172746d656e745f69645f666b65792c0d0a202041444420434f4e53545241494e54
206465706172746d656e745f7061796d656e74735f6465706172746d656e745f6964
5f666b6579200d0a20202020464f524549474e204b455920286465706172746d656e
745f696429205245464552454e434553206465706172746d656e747328696429204f
4e2044454c455445205245535452494354000001122d2d204465706172746d656e74
207061796d656e7473202d3e2070726f66696c65732028637265617465645f627929
0d0a414c544552205441424c45206465706172746d656e745f7061796d656e74730d
0a202044524f5020434f4e53545241494e5420494620455849535453206465706172
746d656e745f7061796d656e74735f637265617465645f62795f666b65792c0d0a20
2041444420434f4e53545241494e54206465706172746d656e745f7061796d656e74
735f637265617465645f62795f666b6579200d0a20202020464f524549474e204b45
592028637265617465645f627929205245464552454e4345532070726f66696c6573
28696429204f4e2044454c455445205245535452494354000000de2d2d2041737365
7473202d3e2070726f66696c65732028637265617465645f6279290d0a414c544552
205441424c45206173736574730d0a202044524f5020434f4e53545241494e542049
4620455849535453206173736574735f637265617465645f62795f666b65792c0d0a
202041444420434f4e53545241494e54206173736574735f637265617465645f6279
5f666b6579200d0a20202020464f524549474e204b45592028637265617465645f62
7929205245464552454e4345532070726f66696c657328696429204f4e2044454c45
5445205245535452494354000000eb2d2d205461736b73202d3e2070726f66696c65
73202861737369676e65645f746f2c2061737369676e65645f6279290d0a414c5445
52205441424c45207461736b730d0a202044524f5020434f4e53545241494e542049
4620455849535453207461736b735f61737369676e65645f746f5f666b65792c0d0a
202041444420434f4e53545241494e54207461736b735f61737369676e65645f746f
5f666b6579200d0a20202020464f524549474e204b4559202861737369676e65645f
746f29205245464552454e4345532070726f66696c657328696429204f4e2044454c
455445205245535452494354000000ba414c544552205441424c45207461736b730d
0a202044524f5020434f4e53545241494e5420494620455849535453207461736b73
5f61737369676e65645f62795f666b65792c0d0a202041444420434f4e5354524149
4e54207461736b735f61737369676e65645f62795f666b6579200d0a20202020464f
524549474e204b4559202861737369676e65645f627929205245464552454e434553
2070726f66696c657328696429204f4e2044454c4554452052455354524943540000
00ff2d2d2041737365742061737369676e6d656e7473202d3e206173736574732061
6e642070726f66696c65730d0a414c544552205441424c452061737365745f617373
69676e6d656e74730d0a202044524f5020434f4e53545241494e5420494620455849
5354532061737365745f61737369676e6d656e74735f61737365745f69645f666b65
792c0d0a202041444420434f4e53545241494e542061737365745f61737369676e6d
656e74735f61737365745f69645f666b6579200d0a20202020464f524549474e204b
4559202861737365745f696429205245464552454e43455320617373657473286964
29204f4e2044454c4554452043415343414445000000de414c544552205441424c45
2061737365745f61737369676e6d656e74730d0a202044524f5020434f4e53545241
494e54204946204558495354532061737365745f61737369676e6d656e74735f6173
7369676e65645f746f5f666b65792c0d0a202041444420434f4e53545241494e5420
61737365745f61737369676e6d656e74735f61737369676e65645f746f5f666b6579
200d0a20202020464f524549474e204b4559202861737369676e65645f746f292052
45464552454e4345532070726f66696c657328696429204f4e2044454c4554452052
45535452494354000000de414c544552205441424c452061737365745f6173736967
6e6d656e74730d0a202044524f5020434f4e53545241494e54204946204558495354
532061737365745f61737369676e6d656e74735f61737369676e65645f62795f666b
65792c0d0a202041444420434f4e53545241494e542061737365745f61737369676e
6d656e74735f61737369676e65645f62795f666b6579200d0a20202020464f524549
474e204b4559202861737369676e65645f627929205245464552454e434553207072
6f66696c657328696429204f4e2044454c455445205245535452494354000001402d
2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20362e204144442055
4e4951554520434f4e53545241494e54530d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d0d0a0d0a2d2d20456e73757265206465706172746d656e74206e61
6d65732061726520756e697175650d0a414c544552205441424c4520646570617274
6d656e74730d0a202044524f5020434f4e53545241494e5420494620455849535453
206465706172746d656e74735f6e616d655f756e697175652c0d0a20204144442043
4f4e53545241494e54206465706172746d656e74735f6e616d655f756e6971756520
554e4951554520286e616d6529000000c02d2d20456e73757265206f666669636520
6c6f636174696f6e206e616d65732061726520756e697175650d0a414c5445522054
41424c45206f66666963655f6c6f636174696f6e730d0a202044524f5020434f4e53
545241494e5420494620455849535453206f66666963655f6c6f636174696f6e735f
6e616d655f756e697175652c0d0a202041444420434f4e53545241494e54206f6666
6963655f6c6f636174696f6e735f6e616d655f756e6971756520554e495155452028
6e616d6529000000bc2d2d20456e737572652070726f66696c6520656d61696c7320
61726520756e697175650d0a414c544552205441424c452070726f66696c65730d0a
202044524f5020434f4e53545241494e54204946204558495354532070726f66696c
65735f636f6d70616e795f656d61696c5f756e697175652c0d0a202041444420434f
4e53545241494e542070726f66696c65735f636f6d70616e795f656d61696c5f756e
6971756520554e495155452028636f6d70616e795f656d61696c29000000f12d2d20
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20372e2041444420494e44
4558455320464f5220504552464f524d414e43450d0a2d2d203d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d
3d3d3d3d3d3d3d3d3d3d0d0a0d0a43524541544520494e444558204946204e4f5420
455849535453206964785f6465706172746d656e745f7061796d656e74735f737461
747573204f4e206465706172746d656e745f7061796d656e74732873746174757329
0000005c43524541544520494e444558204946204e4f542045584953545320696478
5f6465706172746d656e745f7061796d656e74735f63617465676f7279204f4e2064
65706172746d656e745f7061796d656e74732863617465676f727929000000804352
4541544520494e444558204946204e4f5420455849535453206964785f6465706172
746d656e745f7061796d656e74735f6e6578745f647565204f4e206465706172746d
656e745f7061796d656e7473286e6578745f7061796d656e745f6475652920574845
52452073746174757320213d202763616e63656c6c6564270000003c435245415445
20494e444558204946204e4f5420455849535453206964785f7461736b735f737461
747573204f4e207461736b7328737461747573290000004643524541544520494e44
4558204946204e4f5420455849535453206964785f7461736b735f61737369676e65
645f746f204f4e207461736b732861737369676e65645f746f290000007643524541
544520494e444558204946204e4f5420455849535453206964785f7461736b735f64
75655f64617465204f4e207461736b73286475655f64617465292057484552452073
746174757320213d2027636f6d706c657465642720414e442073746174757320213d
202763616e63656c6c6564270000003e43524541544520494e444558204946204e4f
5420455849535453206964785f6173736574735f737461747573204f4e2061737365
747328737461747573290000003e43524541544520494e444558204946204e4f5420
455849535453206964785f70726f66696c65735f726f6c65204f4e2070726f66696c
657328726f6c65290000007043524541544520494e444558204946204e4f54204558
49535453206964785f70726f66696c65735f6465706172746d656e745f6964204f4e
2070726f66696c6573286465706172746d656e745f69642920574845524520646570
6172746d656e745f6964204953204e4f54204e554c4c000000402d2d205265667265
736820506f7374675245535420736368656d612063616368650d0a4e4f5449465920
70677273742c202772656c6f616420736368656d6127"}],"ResultFormatCodes":
[]}
2026/02/14 07:22:34 PG Send: 
{"Type":"Describe","ObjectType":"P","Name":""}
2026/02/14 07:22:34 PG Send: 
{"Type":"Execute","Portal":"","MaxRows":0}
2026/02/14 07:22:34 PG Send: {"Type":"Sync"}
2026/02/14 07:22:34 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Stopping containers...
2026/02/14 07:22:34 PG Send: {"Type":"Terminate"}
Pruned containers: 
[7fd65685bcf37bdd0ce6a5acc730686249973becb4dda36bb4783e5ebebc4009]
Pruned volumes: [supabase_db_ACOB-Signature-Creator]
Pruned network: [supabase_network_ACOB-Signature-Creator]
ERROR: relation "department_payments" does not exist (SQLSTATE 
42P01)        
At statement: 0                                                     
         
-- Data Integrity Improvements                                      
         
-- Add NOT NULL constraints, CHECK constraints, and clean up 
orphaned records
                                                                    
         
-- =====================================================            
         
-- 1. CLEAN UP ORPHANED RECORDS                                     
         
-- =====================================================            
         
                                                                    
         
-- Remove orphaned department_payments (if any)                     
         
DELETE FROM department_payments                                     
         
            ^                                                       
         
